(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef19cc20"],{"154c":function(t,e,n){},"4ec5":function(t,e,n){"use strict";var i=n("bbcf"),a=n("143c").indexOf,r=n("c534"),c=n("e9a9"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,u=r("indexOf"),l=c("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:s||!u||!l},{indexOf:function(t){return s?o.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},c466:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("4ec5"),n("d1f4"),n("6a22"),n("8d56"),n("80cf"),n("5f89");function i(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in n)if(new RegExp("(".concat(i,")")).test(e)){var r=n[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?r:a(r))}return e}function a(t){return("00"+t).substr(t.length)}},d1f4:function(t,e,n){var i=n("6921"),a=n("4c16"),r=n("adc7"),c=n("d922"),o=n("60ce").f,s=n("889a").f,u=n("ea02"),l=n("ec1d"),d=n("8ff4"),f=n("58e4"),p=n("e4bd"),m=n("7acd").set,g=n("8e50"),v=n("19d6"),h=v("match"),y=a.RegExp,w=y.prototype,b=/a/g,x=/a/g,_=new y(b)!==b,k=d.UNSUPPORTED_Y,$=i&&r("RegExp",!_||k||p((function(){return x[h]=!1,y(b)!=b||y(x)==x||"/a/i"!=y(b,"i")})));if($){var A=function(t,e){var n,i=this instanceof A,a=u(t),r=void 0===e;if(!i&&a&&t.constructor===A&&r)return t;_?a&&!r&&(t=t.source):t instanceof A&&(r&&(e=l.call(t)),t=t.source),k&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var o=c(_?new y(t,e):y(t,e),i?this:w,A);return k&&n&&m(o,{sticky:n}),o},O=function(t){t in A||o(A,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},R=s(y),S=0;while(R.length>S)O(R[S++]);w.constructor=A,A.prototype=w,f(a,"RegExp",A)}g("RegExp")},d664:function(t,e,n){"use strict";n("154c")},ef76:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("LayoutBox",{attrs:{one:"平台活动"}},[n("div",{staticClass:"tool_group"},[n("div",{staticClass:"btn_group"},[n("router-link",{attrs:{to:"/adm/marketing/activities/add"}},[n("el-button",{staticClass:"inquire",attrs:{type:"success",size:"small",icon:"el-icon-plus",round:""}},[t._v("新增活动")])],1)],1),n("el-form",{staticClass:"input_group",attrs:{model:t.form,inline:!0,size:"mini"}},[n("el-form-item",{attrs:{label:"时间筛选 "}},[n("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}}),t._v("至 "),n("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),n("el-form-item",[n("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.activityList}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"名称",align:"center","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"活动时间",align:"center",width:"350","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",[t._v(t._s(t._formatDate(e.row.activityBeginTime))+" 至 "+t._s(t._formatDate(e.row.activityEndTime)))])]}}])}),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",[t._v(t._s(1===e.row.status?"启用":"禁用"))])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.onUpdate(e)}}},[t._v("编辑")]),1===e.row.status?n("el-button",{staticStyle:{color:"#fd9a30"},attrs:{type:"text"},on:{click:function(n){return t.onEnd(e)}}},[t._v("禁用")]):0===e.row.status?n("el-button",{staticStyle:{color:"#fd9a30"},attrs:{type:"text"},on:{click:function(n){return t.onStart(e)}}},[t._v("启用")]):t._e(),n("div",[n("el-popconfirm",{attrs:{"confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-info","icon-color":"red",title:"这是一段内容确定删除吗？"},on:{confirm:function(n){return t.apiActivityDelete(e)}}},[n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)],1)]}}])})],1),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},a=[],r=(n("51d7"),n("6a61"),n("2e91")),c=n("1b00"),o=n("c466"),s={name:"AdminActivityList",components:{LayoutBox:c["a"]},data:function(){return{form:{},addTime:"",total:0,pageNo:1,activityList:[]}},created:function(){this.apiGetActivityList()},methods:{handleCurrentChange:function(t){this.pageNo=t,this.apiGetActivityList()},onEnd:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.apiActivityUpOrDown(t.row.id,0);case 2:i=n.sent,i.data.success?(e.$message.success("已终止活动"),e.apiGetActivityList()):e.$message.error(i.data.msg);case 4:case"end":return n.stop()}}),n)})))()},onStart:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.apiActivityUpOrDown(t.row.id,1);case 2:i=n.sent,i.data.success?(e.$message.success("已启用活动"),e.apiGetActivityList()):e.$message.error(i.data.msg);case 4:case"end":return n.stop()}}),n)})))()},onSearch:function(){this.apiGetActivityList()},onUpdate:function(t){this.$router.push({path:"/adm/marketing/activities/add",query:{id:t.row.id,type:t.row.type}})},apiGetActivityList:function(){var t=this,e={pageNo:this.pageNo};Object.assign(e,this.form),this.$http.get(this.$api.getActivityList).then((function(e){t.activityList=e.data.data,t.total=e.data.data.total}))},apiActivityDelete:function(t){var e=this;this.$http.get("".concat(this.$api.delectActivity,"?activeId=").concat(t.row.id)).then((function(t){t.data.success?(e.$message.success("删除成功"),e.apiGetActivityList()):e.$message.error(t.data.msg)}))},apiActivityUpOrDown:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.$http.get("".concat(n.$api.statusActivity,"?activeId=").concat(t,"&status=").concat(e));case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}}),i)})))()},_formatDate:function(t){return Object(o["a"])(new Date(t),"yyyy-MM-dd hh:mm")}}},u=s,l=(n("d664"),n("5d22")),d=Object(l["a"])(u,i,a,!1,null,"b6b85cfe",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-ef19cc20.a653418a.js.map