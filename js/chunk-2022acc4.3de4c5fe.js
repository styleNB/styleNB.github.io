(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2022acc4"],{"51d4":function(t,e,r){"use strict";r("eb0a")},"9ccf":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-card",{staticClass:"box-card"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("广告管理")])],1),r("div",{staticClass:"box_border"},[r("div",{staticClass:"group"},[r("h4",[t._v("添加广告")]),r("el-divider"),r("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"* 图片",prop:"imageUrl"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":t.uploadSectionFile,"show-file-list":!1}},[t.form.imageUrl?r("el-image",{staticClass:"avatar",attrs:{src:t.form.imageUrl,fit:"contain"}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1),r("p",{staticStyle:{color:"#999999","font-size":"10px"}},[t._v("只能上传jpg/png文件，且不超过10MB，最多可上传5张")])],1),r("el-form-item",{attrs:{label:"链接",prop:"advertisingUrl"}},[r("el-input",{model:{value:t.form.advertisingUrl,callback:function(e){t.$set(t.form,"advertisingUrl",e)},expression:"form.advertisingUrl"}})],1),r("el-form-item",{attrs:{label:"排序",prop:"sn"}},[r("el-input",{model:{value:t.form.sn,callback:function(e){t.$set(t.form,"sn",t._n(e))},expression:"form.sn"}})],1),r("el-form-item",{attrs:{size:"medium"}},[r("el-button",{staticClass:"inquire",staticStyle:{width:"100px"},attrs:{type:"success",round:""},on:{click:function(e){return t.submitForm("form")}}},[t._v("保存")]),r("router-link",{attrs:{to:{path:"/adList"}}},[r("el-button",{staticStyle:{width:"100px"},attrs:{round:""}},[t._v("取消")])],1)],1)],1)],1)])],1)],1)},s=[],i={name:"AdAdd",data:function(){return{adId:"",form:{name:"",imageUrl:"",advertisingUrl:"",sn:""},rules:{name:[{required:!0,message:"请输入图片名称",trigger:"blur"}],advertisingUrl:[{required:!0,message:"请输入链接地址",trigger:"change"}],sn:[{required:!0,message:"请输入序号",trigger:"blur"},{type:"number",message:"序号必须为数字"}]}}},methods:{uploadSectionFile:function(t){var e="image/jpeg"===t.file.type||"image/png"===t.file.type,r=t.file.size/1024/1024<10;if(e)if(r){var a=new FormData;a.append("file",t.file),this._upload(a)}else this.$message.error("上传头像图片大小不能超过 10MB!");else this.$message.error("上传头像图片只能是 JPG/PNG 格式!")},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){return t?e.form.imageUrl?void(e.adId?e._updateAd().then((function(t){t&&(e.$message.success("保存成功"),e.$router.push("/adList"))})):e._addAdItem().then((function(t){t&&(e.$message.success("保存成功"),e.$router.push("/adList"))}))):(e.$message.error("请上传图片"),!1):(console.log("error submit!!"),!1)}))},_addAdItem:function(){var t=this.form;return t.enableStatus=0,this.$http.post("/woho/shop/advertising/insert",t).then((function(t){return!0}))},_upload:function(t){var e=this;console.log("formData",t),this.$http.post("/common/oss/uploadFile",t).then((function(t){console.log(t.data.data.webUrl),e.form.imageUrl=t.data.data.webUrl}))},_findAdData:function(){var t=this;this.$http.post("/woho/shop/advertising/findById/"+this.adId).then((function(e){t.form=e.data}))},_updateAd:function(){return this.$http.put("/woho/shop/advertising/update",this.form).then((function(t){return!0}))}},created:function(){this.adId=this.$route.query.id,this.adId&&this._findAdData()}},o=i,n=(r("51d4"),r("5d22")),l=Object(n["a"])(o,a,s,!1,null,"406b787e",null);e["default"]=l.exports},eb0a:function(t,e,r){}}]);
//# sourceMappingURL=chunk-2022acc4.3de4c5fe.js.map