(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216fa2"],{c582:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Layout-box",{attrs:{one:"话题管理"}},[r("div",[r("el-form",{attrs:{inline:""}},[r("el-form-item",[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增话题")])],1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tagList,size:"small"}},[r("el-table-column",{attrs:{prop:"name",label:"名称"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.onEdit(t)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.onDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{staticClass:"mt-1 text-right",attrs:{background:"","current-page":e.queryInit.pageNo,"page-sizes":[10,20,30,40],"page-size":e.queryInit.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.queryInit.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{width:"30%",title:e.tagId?"编辑话题":"新增话题",visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,size:"small","label-width":"100px"}},[r("el-form-item",{attrs:{label:"名称：",prop:"name"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.onCancel}},[e._v("取 消")]),e.tagId?r("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保 存")]):r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},a=[],i=(r("51d7"),r("d211")),s=(r("6a61"),r("2e91")),o=r("1b00"),u={name:"topicList",components:{LayoutBox:o["a"]},data:function(){return{queryInit:{pageNo:1,pageSize:10,total:0},addForm:{name:""},addRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},tagList:[],tagId:"",dialogVisible:!1}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.apiQueryTag();case 2:case"end":return t.stop()}}),t)})))()},methods:{handleSizeChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.queryInit.pageSize=e,r.next=3,t.apiQueryTag();case 3:case"end":return r.stop()}}),r)})))()},handleCurrentChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.queryInit.pageNo=e,r.next=3,t.apiQueryTag();case 3:case"end":return r.stop()}}),r)})))()},onSubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.addForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=15;break}return n=Object(i["a"])({},e.addForm),t.next=4,e.$http.post(e.$api.insertTag,n);case 4:if(a=t.sent,!a.data.success){t.next=12;break}return e.$message.success("添加成功"),t.next=9,e.apiQueryTag();case 9:e.onCancel(),t.next=13;break;case 12:e.$message.error(a.data.msg);case 13:t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},onEdit:function(e){this.tagId=e.row.id,this.addForm=JSON.parse(JSON.stringify(e.row)),this.dialogVisible=!0},onDelete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm('是否确定要删除该话题 "是否继续"',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("".concat(t.$api.deleteTag,"/").concat(e));case 2:if(n=r.sent,!n.data.success){r.next=9;break}return t.$message.success("删除成功"),r.next=7,t.apiQueryTag();case 7:r.next=10;break;case 9:t.$message.error(n.data.msg);case 10:case"end":return r.stop()}}),r)}))));case 2:case"end":return r.stop()}}),r)})))()},onSave:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.addForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=15;break}return n=Object(i["a"])({},e.addForm),t.next=4,e.$http.put(e.$api.updateTag,n);case 4:if(a=t.sent,!a.data.success){t.next=12;break}return e.$message.success("添加成功"),t.next=9,e.apiQueryTag();case 9:e.onCancel(),t.next=13;break;case 12:e.$message.error(a.data.msg);case 13:t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},onCancel:function(){this.addForm={},this.dialogVisible=!1,this.tagId=""},apiQueryTag:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(i["a"])({},e.queryInit),t.next=3,e.$http.post(e.$api.queryTag,r);case 3:n=t.sent,e.tagList=n.data.data.list,e.queryInit=n.data.data;case 6:case"end":return t.stop()}}),t)})))()}}},c=u,l=r("5d22"),d=Object(l["a"])(c,n,a,!1,null,"fb4422fa",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d216fa2.dce4694a.js.map