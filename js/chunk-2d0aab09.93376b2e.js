(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aab09"],{"11a4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("layout-box",{attrs:{one:"新增活动"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px",size:"small"}},[r("el-form-item",{attrs:{label:"活动分类：",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.activityType,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.type}})})),1)],1),r("el-form-item",{attrs:{label:"活动名称：",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"活动时间：",prop:"activityBeginTime"}},[r("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.activityTime,callback:function(t){e.activityTime=t},expression:"activityTime"}})],1),r("el-form-item",{attrs:{label:"活动适用对象：",prop:"rules"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.rules,callback:function(t){e.$set(e.form,"rules",t)},expression:"form.rules"}},e._l(e.couponRules,(function(e){return r("el-option",{key:e.id,attrs:{label:e.ruleName,value:e.rules}})})),1)],1),r("activity-add-cmp",{attrs:{activityScope:"1"},on:{onSubmit:e.onSumbit}})],1)],1)],1)},i=[],n=r("d211"),c=(r("6a61"),r("2e91")),o=r("1b00"),s=r("ce89"),u={name:"markActivityAdd",components:{LayoutBox:o["a"],activityAddCmp:s["a"]},data:function(){return{form:{type:"",name:"",activityBeginTime:"",activityEndTime:"",rules:""},rules:{type:[{required:!0,message:"请选择活动分类",trigger:"chang"}],name:[{required:!0,message:"请输入活动名",trigger:"blur"}],activityBeginTime:[{required:!0,message:"请选择活动时间",trigger:"change"}],rules:[{required:!0,message:"请选择适用对象",trigger:"change"}]},activityType:[],couponRules:[],activityTime:""}},watch:{activityTime:function(e,t){this.form.activityBeginTime=e[0],this.form.activityEndTime=e[1]}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.apiGetActivPageParam();case 2:case"end":return t.stop()}}),t)})))()},methods:{onSumbit:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e=Object(n["a"])(Object(n["a"])({},e),{},{activity:t.form}),r.next=3,t.$refs.form.validate(function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=7;break}return r.next=3,t.$http.post(t.$api.insertActivity,e);case 3:i=r.sent,i.data.success?(t.$message.success("添加成功"),t.$router.go(-1)):t.$message.error(i.data.msg),r.next=8;break;case 7:return r.abrupt("return",!1);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})))()},apiGetActivPageParam:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("".concat(e.$api.activityGetActivPageParam,"?scope=1"));case 2:r=t.sent,e.activityType=r.data.data.activityTypes,e.couponRules=r.data.data.activityRules;case 5:case"end":return t.stop()}}),t)})))()}}},l=u,m=r("5d22"),p=Object(m["a"])(l,a,i,!1,null,"49422078",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0aab09.93376b2e.js.map