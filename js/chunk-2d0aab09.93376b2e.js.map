{"version":3,"sources":["webpack:///./src/views/marketing/mark/activity/add.vue?634d","webpack:///src/views/marketing/mark/activity/add.vue","webpack:///./src/views/marketing/mark/activity/add.vue?d94a","webpack:///./src/views/marketing/mark/activity/add.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","form","rules","model","value","callback","$$v","$set","expression","_l","item","key","id","name","type","activityTime","ruleName","on","onSumbit","staticRenderFns","components","LayoutBox","activityAddCmp","data","activityBeginTime","activityEndTime","activityType","couponRules","watch","newvalue","methods","component"],"mappings":"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","file":"js/chunk-2d0aab09.93376b2e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('layout-box',{attrs:{\"one\":\"新增活动\"}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"150px\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"活动分类：\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},_vm._l((_vm.activityType),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.type}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"活动名称：\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"活动时间：\",\"prop\":\"activityBeginTime\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.activityTime),callback:function ($$v) {_vm.activityTime=$$v},expression:\"activityTime\"}})],1),_c('el-form-item',{attrs:{\"label\":\"活动适用对象：\",\"prop\":\"rules\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.rules),callback:function ($$v) {_vm.$set(_vm.form, \"rules\", $$v)},expression:\"form.rules\"}},_vm._l((_vm.couponRules),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.ruleName,\"value\":item.rules}})}),1)],1),_c('activity-add-cmp',{attrs:{\"activityScope\":\"1\"},on:{\"onSubmit\":_vm.onSumbit}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <layout-box one=\"新增活动\">\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"150px\" size=\"small\">\r\n        <el-form-item label=\"活动分类：\" prop=\"type\">\r\n          <el-select v-model=\"form.type\" placeholder=\"请选择\">\r\n            <el-option v-for=\"item in activityType\" :key=\"item.id\" :label=\"item.name\" :value=\"item.type\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动名称：\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"活动时间：\" prop=\"activityBeginTime\">\r\n          <el-date-picker v-model=\"activityTime\" type=\"datetimerange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"活动适用对象：\" prop=\"rules\">\r\n          <el-select v-model=\"form.rules\" placeholder=\"请选择\">\r\n            <el-option v-for=\"item in couponRules\" :key=\"item.id\" :label=\"item.ruleName\" :value=\"item.rules\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <activity-add-cmp activityScope=\"1\" @onSubmit=\"onSumbit\" />\r\n      </el-form>\r\n    </layout-box>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LayoutBox from '@/components/LayoutBox/index'\r\nimport activityAddCmp from '@/components/activity_cmp/add.vue'\r\n\r\nexport default {\r\n  name: 'markActivityAdd',\r\n\r\n  components: {\r\n    LayoutBox,\r\n    activityAddCmp,\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      form: {\r\n        type: '', // 活动分类\r\n        name: '', // 活动名称\r\n        activityBeginTime: '', // 活动开始时间\r\n        activityEndTime: '', // 活动结束时间\r\n        rules: '', // 使用对象\r\n      },\r\n      rules: {\r\n        type: [\r\n          { required: true, message: '请选择活动分类', trigger: 'chang' },\r\n        ],\r\n        name: [\r\n          { required: true, message: '请输入活动名', trigger: 'blur' },\r\n        ],\r\n        activityBeginTime: [\r\n          { required: true, message: '请选择活动时间', trigger: 'change' },\r\n        ],\r\n        rules: [\r\n          { required: true, message: '请选择适用对象', trigger: 'change' },\r\n        ],\r\n      },\r\n      activityType: [], // 获取的活动分类\r\n      couponRules: [], // 获取的活动对象\r\n      activityTime: '', // 时间解析\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    // 时间解析\r\n    activityTime (newvalue, oldvalue) {\r\n      this.form.activityBeginTime = newvalue[0]\r\n      this.form.activityEndTime = newvalue[1]\r\n    },\r\n  },\r\n\r\n  async created () {\r\n    await this.apiGetActivPageParam()\r\n  },\r\n\r\n  methods: {\r\n    // 点击提交\r\n    async onSumbit (data) {\r\n      data = {\r\n        ...data,\r\n        activity: this.form\r\n      }\r\n      await this.$refs.form.validate(async (valid) => {\r\n        if (valid) {\r\n          const res = await this.$http.post(this.$api.insertActivity, data)\r\n          if (res.data.success) {\r\n            this.$message.success('添加成功')\r\n            this.$router.go(-1)\r\n          } else {\r\n            this.$message.error(res.data.msg)\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 获取活动获取页面选项值\r\n    async apiGetActivPageParam () {\r\n      const res = await this.$http.get(`${this.$api.activityGetActivPageParam}?scope=1`)\r\n      this.activityType = res.data.data.activityTypes\r\n      this.couponRules = res.data.data.activityRules\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=49422078&scoped=true&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49422078\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}