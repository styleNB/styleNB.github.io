(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd09f"],{"804e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("layout-box",{attrs:{one:"菜单列表"}},[r("el-card",{attrs:{shadow:"never"}},[r("div",{staticClass:"d-flex"},[r("span",{staticClass:"flex-1"},[e._v("菜单列表")]),r("el-button",{staticClass:"ml-2",attrs:{size:"mini"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v(" 添加菜单")])],1)]),r("div",{staticClass:"mt-1"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.list}},[r("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.menuCode))]}}])}),r("el-table-column",{attrs:{prop:"menuName",label:"菜单名称",align:"center"}}),r("el-table-column",{attrs:{prop:"menuUrl",label:"菜单路径",align:"center"}}),r("el-table-column",{attrs:{label:"前端图标",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("i",{class:e.row.menuIcon})]}}])}),r("el-table-column",{attrs:{label:"菜单级数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("levelFilter")(t.row.parentId))+" ")]}}])}),r("el-table-column",{attrs:{prop:"createTime",label:"添加时间",align:"center"}}),r("el-table-column",{attrs:{label:"菜单类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatType")(t.row.menuType))+" ")]}}])}),r("el-table-column",{attrs:{prop:"menuSort",label:"排序",align:"center"}}),r("el-table-column",{attrs:{label:"设置",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"mini",disabled:e._f("disableNextLevel")(t.row.parentId)},on:{click:function(r){return e.handleShowNextLevel(t.row.id)}}},[e._v("查看下级")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.showEditDialog(t.row.id)}}},[e._v("编辑 ")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.handleDelete(t.row.id)}}},[e._v("删除 ")])]}}])})],1),r("el-dialog",{attrs:{title:"添加菜单",width:"40%","close-on-click-modal":!1,visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",attrs:{"label-width":"100px",model:e.resource,rules:e.addFormRules}},[r("el-form-item",{attrs:{label:"菜单名称：",prop:"menuName"}},[r("el-input",{model:{value:e.resource.menuName,callback:function(t){e.$set(e.resource,"menuName",t)},expression:"resource.menuName"}})],1),r("el-form-item",{attrs:{label:"菜单类型",prop:"menuType"}},[r("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.resource.menuType,callback:function(t){e.$set(e.resource,"menuType",t)},expression:"resource.menuType"}},e._l(e.optionsfrom,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"上级菜单",prop:"parentId"}},[r("el-cascader",{attrs:{options:e.menuTreeMenu,props:{checkStrictly:!0},clearable:""},on:{change:function(t){return e.onSelectMenu(t,"resource")}},model:{value:e.resource.parentId,callback:function(t){e.$set(e.resource,"parentId",t)},expression:"resource.parentId"}})],1),r("el-form-item",{attrs:{label:"菜单路径：",prop:"menuUrl"}},[r("el-input",{model:{value:e.resource.menuUrl,callback:function(t){e.$set(e.resource,"menuUrl",t)},expression:"resource.menuUrl"}})],1),r("el-form-item",{attrs:{label:"前端图标：",prop:"menuIcon"}},[r("el-input",{model:{value:e.resource.menuIcon,callback:function(t){e.$set(e.resource,"menuIcon",t)},expression:"resource.menuIcon"}}),r("i",{staticStyle:{"margin-left":"8px"},attrs:{"icon-class":e.resource.menuIcon}})],1),r("el-form-item",{attrs:{label:"编号",prop:"menuCode"}},[r("el-input",{model:{value:e.resource.menuCode,callback:function(t){e.$set(e.resource,"menuCode",t)},expression:"resource.menuCode"}})],1),r("el-form-item",{attrs:{label:"排序",prop:"menuSort"}},[r("el-input",{model:{value:e.resource.menuSort,callback:function(t){e.$set(e.resource,"menuSort",t)},expression:"resource.menuSort"}})],1),r("el-form-item",{attrs:{label:"权限",prop:"permission"}},[r("el-input",{model:{value:e.resource.permission,callback:function(t){e.$set(e.resource,"permission",t)},expression:"resource.permission"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑菜单",width:"40%",visible:e.editDialogVisible},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{"label-width":"100px",model:e.editForm,rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"菜单类型",prop:"menuType"}},[r("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.editForm.menuType,callback:function(t){e.$set(e.editForm,"menuType",t)},expression:"editForm.menuType"}},e._l(e.editoptios,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"上级菜单"}},[r("el-cascader",{attrs:{options:e.menuTreeMenu,props:{checkStrictly:!0},clearable:""},on:{change:function(t){return e.onSelectMenu(t,"editForm")}},model:{value:e.editForm.parentId,callback:function(t){e.$set(e.editForm,"parentId",t)},expression:"editForm.parentId"}})],1),r("el-form-item",{attrs:{label:"菜单名称：",prop:"menuName"}},[r("el-input",{model:{value:e.editForm.menuName,callback:function(t){e.$set(e.editForm,"menuName",t)},expression:"editForm.menuName"}})],1),r("el-form-item",{attrs:{label:"菜单路径："}},[r("el-input",{model:{value:e.editForm.menuUrl,callback:function(t){e.$set(e.editForm,"menuUrl",t)},expression:"editForm.menuUrl"}})],1),r("el-form-item",{attrs:{label:"前端图标"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.editForm.menuIcon,callback:function(t){e.$set(e.editForm,"menuIcon",t)},expression:"editForm.menuIcon"}})],1),r("el-form-item",{attrs:{label:"编号：",prop:"menuCode"}},[r("el-input",{model:{value:e.editForm.menuCode,callback:function(t){e.$set(e.editForm,"menuCode",t)},expression:"editForm.menuCode"}})],1),r("el-form-item",{attrs:{label:"排序：",prop:"menuSort"}},[r("el-input",{model:{value:e.editForm.menuSort,callback:function(t){e.$set(e.editForm,"menuSort",t)},expression:"editForm.menuSort"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1)],1),r("el-pagination",{staticClass:"mt-1",attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","current-page":e.queryInfo.pageNo,"page-size":e.queryInfo.pageSize,"page-sizes":[2,5,10],total:e.total},on:{"update:currentPage":function(t){return e.$set(e.queryInfo,"pageNo",t)},"update:current-page":function(t){return e.$set(e.queryInfo,"pageNo",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},a=[],o=(r("957b"),r("6a61"),r("2e91")),l=[{label:"菜单",value:0},{label:"按钮",value:1}],i={data:function(){return{listLoading:!0,optionsfrom:[{label:"菜单",value:0},{label:"按钮",value:1}],options:[],addFormRules:{menuName:[{required:!0,message:"请输入姓名",trigger:"change"}],menuCode:[{required:!0,message:"请输入编码",trigger:"blur"}],menuSort:[{required:!0,message:"请输入排序",trigger:"blur"}],menuType:[{required:!0,message:"请输入菜单类型",trigger:"change"}]},editFormRules:{menuType:[{required:!0,message:"请输入菜单类型",trigger:"change"}],menuName:[{required:!0,message:"请输入姓名",trigger:"blur"}],menuCode:[{required:!0,message:"请输入编码",trigger:"blur"}],menuSort:[{required:!0,message:"请输入排序",trigger:"blur"}]},queryInfo:{id:"",pageNo:1,pageSize:10},list:[],editForm:{menuTyp:""},editoptios:[{value:0,label:"菜单"},{value:1,label:"按钮"}],total:0,addDialogVisible:!1,editDialogVisible:!1,resource:{roleName:"",roleCode:"",menuSor:"",menuUrl:"",menuType:"",menuIcon:""},menuTreeMenu:{}}},filters:{formatType:function(e){for(var t=0;t<l.length;t++)if(e===l[t].value)return l[t].label;return""},levelFilter:function(e){return"0"===e?"一级":"0"!==e?"二级":void 0},disableNextLevel:function(e){return"0"!==e}},methods:{handleShowNextLevel:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("/woho/sys/menu/findByParentId/"+e);case 2:n=r.sent,console.log(n),t.list=n.data.data;case 5:case"end":return r.stop()}}),r)})))()},fetch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,e.$http.post("/woho/sys/menu/query",e.queryInfo);case 3:r=t.sent,e.listLoading=!1,e.list=r.data.data.list,e.total=r.data.data.total;case 7:case"end":return t.stop()}}),t)})))()},addUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("资料填写完整"));case 2:return t.next=4,e.$http.post("/woho/sys/menu/insert",e.resource);case 4:if(n=t.sent,200===n.data.code){t.next=7;break}return t.abrupt("return");case 7:e.$message.success("添加菜单成功！"),e.addDialogVisible=!1,e.fetch(),e.apiMenuTreeMenu();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleDelete:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(n=r.sent,"confirm"===n){r.next=5;break}return r.abrupt("return",t.$message.info("已取消删除"));case 5:return r.next=7,t.$http.delete("/woho/sys/menu/delete/"+e);case 7:if(a=r.sent,200===a.data.code){r.next=10;break}return r.abrupt("return",t.$message.error("删除菜单失败！"));case 10:t.$message.success("删除菜单成功！"),t.fetch();case 12:case"end":return r.stop()}}),r)})))()},showEditDialog:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("/woho/sys/menu/findById/"+e);case 2:n=r.sent,t.editForm=n.data,console.log(t.editForm),t.editDialogVisible=!0;case 6:case"end":return r.stop()}}),r)})))()},editUserInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("请填写完整"));case 2:return t.next=4,e.$http.put("/woho/sys/menu/update",e.editForm);case 4:if(n=t.sent,console.log(n),200===n.data.code){t.next=8;break}return t.abrupt("return",e.$message.error("更新菜单失败！"));case 8:e.editDialogVisible=!1,e.$message.success("更改菜单成功"),e.fetch();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.fetch()},handleCurrentChange:function(e){console.log(e),this.queryInfo.pageNo=e,this.fetch()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},onSelectMenu:function(e,t){this[t].parentId=e[e.length-1]},_recursiveChildList:function(e){var t=this;if(e.length>0)var r=e.map((function(e){return e.value=e.id,e.label=e.menuName,e.children=t._recursiveChildList(e.childList),e}));return r},apiMenuTreeMenu:function(){var e=this;this.$http.post("/woho/sys/menu/treeMenu").then((function(t){t.data.success?e.menuTreeMenu=e._recursiveChildList(t.data.data):e.$message.error(t.data.msg)}))}},created:function(){this.fetch(),this.apiMenuTreeMenu()}},s=i,u=r("5d22"),c=Object(u["a"])(s,n,a,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0dd09f.c8fbf432.js.map