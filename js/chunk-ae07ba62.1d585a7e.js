(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae07ba62"],{6810:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-card"},[a("LayoutBox",{attrs:{one:"拼团"}},[a("div",{staticClass:"tool_group"},[a("div",{staticClass:"btn_group"},[a("router-link",{attrs:{to:"/mark/list/teamBuyList/addTeamBuy"}},[a("el-button",{staticClass:"inquire",attrs:{type:"success",size:"small",icon:"el-icon-plus",round:""}},[t._v("新增活动")])],1)],1),a("el-form",{staticClass:"input_group",attrs:{model:t.form,inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{placeholder:"活动名称"},model:{value:t.form.activeName,callback:function(e){t.$set(t.form,"activeName",e)},expression:"form.activeName"}})],1),a("el-form-item",{attrs:{label:"时间筛选 "}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}}),t._v("至 "),a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.teamBuyList}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"activeName",label:"名称",align:"center"}}),a("el-table-column",{attrs:{label:"活动时间",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.startTime)+" 至 "+t._s(e.row.endTime))])]}}])}),a("el-table-column",{attrs:{label:"活动状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[(new Date).getTime()<e.row.startTimeDate?a("span",[t._v("未开始")]):(new Date).getTime()>e.row.startTimeDate&&(new Date).getTime()<e.row.endTimeDate?a("span",[t._v("进行中")]):(new Date).getTime()>e.row.endTimeDate?a("span",[t._v("已结束")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0===e.row.state?"未启用":"已启用"))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{color:"#5bd9be"},attrs:{type:"text"},on:{click:function(a){return t.onUpdate(e)}}},[t._v("编辑")]),1===e.row.state?a("el-button",{staticStyle:{color:"#fd9a30"},attrs:{type:"text"},on:{click:function(a){return t.onEnd(e)}}},[t._v("终止")]):0===e.row.state?a("el-button",{staticStyle:{color:"#fd9a30"},attrs:{type:"text"},on:{click:function(a){return t.onStart(e)}}},[t._v("启用")]):t._e(),a("el-button",{staticStyle:{color:"#ff474c"},attrs:{type:"text"},on:{click:function(a){return t.onDelete(e)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.teamBuyTotal},on:{"current-change":t.handleCurrentChange}})],1)],1)},n=[],o=(a("51d7"),a("957b"),a("b4e6"),a("6a22"),a("80cf"),a("1b00")),s={name:"BargainsList",components:{LayoutBox:o["a"]},data:function(){return{form:{},teamBuyList:[],teamBuyTotal:0,activeId:"",pageNo:1}},created:function(){this.activeId=0,this.apiActivityList()},methods:{handleCurrentChange:function(t){this.pageNo=t,this.apiActivityList()},onEnd:function(t){var e=this;this.apiActivityUpOrDown(t.row.id,0).then((function(a){e.$message.success("已终止活动"),t.row.state=0}))},onStart:function(t){var e=this;this.apiActivityUpOrDown(t.row.id,1).then((function(a){e.$message.success("已启用活动"),t.row.state=1}))},onDelete:function(t){this.apiActivityDelete(t)},onUpdate:function(t){console.log(t),this.$router.push({path:"/mark/list/teamBuyList/addTeamBuy",query:{id:t.row.id}})},onSearch:function(){this.apiActivityList()},apiActivityList:function(){var t=this,e={pageNo:this.pageNo,activeType:this.activeId,type:1};Object.assign(e,this.form),this.$http.post("/woho/activity/manage/query",e).then((function(e){t.teamBuyList=e.data.data.list,t.teamBuyTotal=e.data.data.total,t.teamBuyList.map((function(t){t.startTimeDate=new Date(t.startTime.replace(/-/g,"/")).getTime(),t.endTimeDate=new Date(t.endTime.replace(/-/g,"/")).getTime()}))}))},apiActivityUpOrDown:function(t,e){var a=this;return this.$http.post("/woho/activity/manage/upOrDown/".concat(t,"/").concat(e)).then((function(t){t.data.success||a.$message.success(t.data.msg)}))},apiActivityDelete:function(t){var e=this;this.$http.delete("/woho/activity/manage/delete/".concat(t.row.id," ")).then((function(a){a.data.success&&(e.$message.success("删除成功"),e.teamBuyList.splice(t.$index,1))}))}}},r=s,c=(a("b044"),a("5d22")),l=Object(c["a"])(r,i,n,!1,null,"90c8da24",null);e["default"]=l.exports},b044:function(t,e,a){"use strict";a("fa4b")},b4e6:function(t,e,a){"use strict";var i=a("bbcf"),n=a("5501"),o=a("285a"),s=a("5152"),r=a("529d"),c=a("5c1e"),l=a("7389"),u=a("780c"),m=a("e9a9"),d=u("splice"),p=m("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,y=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var a,i,u,m,d,p,b=r(this),g=s(b.length),w=n(t,g),T=arguments.length;if(0===T?a=i=0:1===T?(a=0,i=g-w):(a=T-2,i=h(f(o(e),0),g-w)),g+a-i>y)throw TypeError(v);for(u=c(b,i),m=0;m<i;m++)d=w+m,d in b&&l(u,m,b[d]);if(u.length=i,a<i){for(m=w;m<g-i;m++)d=m+i,p=m+a,d in b?b[p]=b[d]:delete b[p];for(m=g;m>g-i+a;m--)delete b[m-1]}else if(a>i)for(m=g-i;m>w;m--)d=m+i-1,p=m+a-1,d in b?b[p]=b[d]:delete b[p];for(m=0;m<a;m++)b[m+w]=arguments[m+2];return b.length=g-i+a,u}})},fa4b:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ae07ba62.1d585a7e.js.map