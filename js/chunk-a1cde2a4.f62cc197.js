(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1cde2a4"],{"4fe2":function(e,t,a){"use strict";a("b57e")},9644:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("LayoutBox",{attrs:{one:"添加超市"}},[a("h4",[e._v("添加超市")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"130px"}},[a("el-form-item",{attrs:{label:"商铺名称：",prop:"shopName"}},[a("el-input",{model:{value:e.form.shopName,callback:function(t){e.$set(e.form,"shopName",t)},expression:"form.shopName"}})],1),a("el-form-item",{attrs:{label:"小超账号：",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"联系人：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"手机号：",prop:"name"}},[a("el-input",{model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),a("el-form-item",{attrs:{label:"地区：",prop:"area"}},[a("areaSelectCmp",{attrs:{area:e.form.area},on:{childFn:e.onChild}})],1),a("el-form-item",{attrs:{label:"详细地址：",prop:"adderss"}},[a("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),a("el-amap",{staticClass:"amap-demo",staticStyle:{height:"300px",width:"600px"},attrs:{vid:"amapDemo",center:e.mapCenter,zoom:12}},e._l(e.markers,(function(e){return a("el-amap-marker",{key:e.id,attrs:{position:e}})})),1)],1),a("el-form-item",{attrs:{label:"税号：",prop:"tax"}},[a("el-input",{model:{value:e.form.tax,callback:function(t){e.$set(e.form,"tax",t)},expression:"form.tax"}})],1),a("el-form-item",{attrs:{label:"身份证：",required:""}},[a("div",{staticClass:"identityCardUrl"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onIdentityCardUrlPositive,"show-file-list":!1}},[e.identityCardUrlPositive?a("el-image",{staticClass:"avatar",attrs:{src:e.identityCardUrlPositive,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onIdentityCardUrlNegative,"show-file-list":!1}},[e.identityCardUrlNegative?a("el-image",{staticClass:"avatar",attrs:{src:e.identityCardUrlNegative,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)]),a("el-form-item",{attrs:{label:"营业执照：",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onBusinessLicenseUrl,"show-file-list":!1}},[e.form.businessLicenseUrl?a("el-image",{staticClass:"avatar",attrs:{src:e.form.businessLicenseUrl,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),a("el-form-item",{attrs:{label:"卫生许可证：",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onSanitaryOperationLicenseUrl,"show-file-list":!1}},[e.form.sanitaryOperationLicenseUrl?a("el-image",{staticClass:"avatar",attrs:{src:e.form.sanitaryOperationLicenseUrl,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),a("el-form-item",{attrs:{label:"门头照：",required:""}},[a("div",{staticClass:"identityCardUrl"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onDoorHeadUrl0,"show-file-list":!1}},[e.doorHeadUrl0?a("el-image",{staticClass:"avatar",attrs:{src:e.doorHeadUrl0,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onDoorHeadUrl1,"show-file-list":!1}},[e.doorHeadUrl1?a("el-image",{staticClass:"avatar",attrs:{src:e.doorHeadUrl1,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onDoorHeadUrl2,"show-file-list":!1}},[e.doorHeadUrl2?a("el-image",{staticClass:"avatar",attrs:{src:e.doorHeadUrl2,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)]),a("el-divider"),a("el-form-item",[a("el-button",{staticClass:"inquire",staticStyle:{width:"120px"},attrs:{type:"success",round:""},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")]),a("router-link",{attrs:{to:"/admin/addList"}},[a("el-button",{staticStyle:{width:"120px"},attrs:{type:"danger",round:""}},[e._v("取消")])],1)],1)],1)],1)],1)},i=[],s=(a("5cff"),a("1e6a"),a("6a22"),a("80cf"),a("dcd4"),a("f676")),o=a("1b00"),l={name:"SuperMarketAddAdd",components:{areaSelectCmp:s["a"],LayoutBox:o["a"]},data:function(){return{form:{shopName:"",name:"",tel:"",mobile:"",area:"",adderss:"",tax:"",identityCardUrl:"",businessLicenseUrl:"",sanitaryOperationLicenseUrl:"",doorHeadUrl:""},identityCardUrlPositive:"",identityCardUrlNegative:"",doorHeadUrl0:"",doorHeadUrl1:"",doorHeadUrl2:"",rules:{shopName:[{required:!0,message:"请输入商铺名称",trigger:"blur"}],name:[{required:!0,message:"请输入联系人",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号",trigger:"blur"}],mobile:[{required:!0,message:"请输入账号",trigger:"blur"}],area:[{required:!0,message:"请选择地区",trigger:"blur"}],adderss:[{required:!0,message:"请输入详细地址",trigger:"blur"}],tax:[{required:!0,message:"请输入税号",trigger:"blur"}]},markers:[[121.59996,31.197646],[121.40018,31.197622],[121.69991,31.207649]],searchOption:{citylimit:!0},mapCenter:[121.59996,31.197646]}},beforeCreate:function(){},mounted:function(){},methods:{onChild:function(e){var t=e[0]+","+e[1];3===e.length&&(t=t+","+e[2]),this.form.area=t},onIdentityCardUrlPositive:function(e){var t=this;this._uploadSectionFile(e).then((function(e){t.identityCardUrlPositive=e}))},onIdentityCardUrlNegative:function(e){var t=this;this._uploadSectionFile(e).then((function(e){t.identityCardUrlNegative=e}))},onBusinessLicenseUrl:function(e){var t=this;this._uploadSectionFile(e).then((function(e){t.form.businessLicenseUrl=e}))},onSanitaryOperationLicenseUrl:function(e){var t=this;this._uploadSectionFile(e).then((function(e){t.form.sanitaryOperationLicenseUrl=e}))},onDoorHeadUrl0:function(e){var t=this;this._uploadSectionFile(e).then((function(e){t.doorHeadUrl0=e}))},onDoorHeadUrl1:function(e){var t=this;this._uploadSectionFile(e).then((function(e){t.doorHeadUrl1=e}))},onDoorHeadUrl2:function(e){var t=this;this._uploadSectionFile(e).then((function(e){t.doorHeadUrl2=e}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(t.identityCardUrlPositive)if(t.identityCardUrlNegative)if(t.form.businessLicenseUrl)if(t.form.sanitaryOperationLicenseUrl)if(t.form.doorHeadUrl=t.doorHeadUrl0+","+t.doorHeadUrl1+","+t.doorHeadUrl2,t.form.identityCardUrl=t.identityCardUrlPositive+","+t.identityCardUrlNegative,t.form.doorHeadUrl.replace(/,/g,"")){var a=t.form;a.latitude=t.mapCenter[1],a.longitude=t.mapCenter[0],a.approvalStatus=1,a.shopType=2,t._addShop(a)}else t.$message.error("请选择门头照");else t.$message.error("请选择卫生许可证图片");else t.$message.error("请选择营业执照图片");else t.$message.error("请选择身份证背面图片");else t.$message.error("请选择身份证正面图片")}))},onSearchResult:function(e){var t=this,a=0,r=0;if(console.log("pois",e),e.length>0){e.forEach((function(e){var i=e.lng,s=e.lat;r+=i,a+=s,t.markers.push([e.lng,e.lat])}));var i={lng:r/e.length,lat:a/e.length};this.form.adderss=e[0].name,this.mapCenter=[i.lng,i.lat]}},_uploadSectionFile:function(e){var t="image/jpeg"===e.file.type||"image/png"===e.file.type,a=e.file.size/1024/1024<10;if(t){if(a){var r=new FormData;return r.append("file",e.file),this.$http.post("/common/oss/uploadFile",r).then((function(e){return e.data.data.webUrl}))}this.$message.error("上传图片大小不能超过 10MB!")}else this.$message.error("上传图片只能是 JPG/PNG 格式!")},_addShop:function(e){var t=this;this.$http.post("/woho/shop/manage/insert",e).then((function(e){e.data.success?(t.$message.success("添加成功"),t.$router.push("/admin/addList")):t.$message.error(e.data.msg)}))}}},n=l,d=(a("4fe2"),a("5d22")),c=Object(d["a"])(n,r,i,!1,null,"8d807eec",null);t["default"]=c.exports},b57e:function(e,t,a){}}]);
//# sourceMappingURL=chunk-a1cde2a4.f62cc197.js.map