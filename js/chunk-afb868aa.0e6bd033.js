(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-afb868aa"],{"0c9c":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"329e":function(e,t,a){},6490:function(e,t,a){"use strict";a("329e")},"7fc7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("layout-box",{attrs:{one:"商品管理",two:"商品分类"}},[a("el-card",{staticClass:"mb-2",attrs:{shadow:"never"}},[a("div",{staticClass:"d-flex"},[a("areaSelectCmp2",{attrs:{areaParent:e.search.area,size:"mini"},on:{childFn2:function(t){return e.onChildFn2(t)}}}),"003"===e.roleCode||"005"===e.roleCode?[a("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:e.addShopCategory}},[e._v("添加店铺分类")])]:[a("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(t){return e.showAddCateDialog()}}},[e._v(" 添加分类 ")])]],2)]),a("tree-table",{attrs:{data:e.cateList,columns:"003"===e.roleCode||"005"===e.roleCode?e.columns2:e.columns,"selection-type":!1,"expand-type":!1,"show-index":"","index-text":"#",border:"","show-row-hover":!1,stripe:""},scopedSlots:e._u([{key:"operate",fn:function(t){return[a("div",{},["003"===e.roleCode||"005"===e.roleCode?[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.categoryAddGoods(t)}}},[e._v("在分类中添加商品")])]:e._e(),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.editCateDialog(t)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.delCateDialog(t.row.id)}}},[e._v("删除")])],2)]}},{key:"log",fn:function(e){return[a("el-image",{staticStyle:{width:"100px"},attrs:{src:e.row.log,fit:"cover"}})]}},{key:"level",fn:function(t){return[0==t.row.level?a("el-tag",[e._v("一级")]):1==t.row.level?a("el-tag",{attrs:{type:"success"}},[e._v("二级")]):a("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])}),a("el-pagination",{staticClass:"mt-1",attrs:{"current-page":e.queryInfo.pageNo,"page-sizes":[2,5,10,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"添加分类",visible:e.addCateDialogVisible,width:"450px"},on:{"update:visible":function(t){e.addCateDialogVisible=t},close:e.addCateDialogClosed}},[a("el-form",{ref:"addCateFormRef",attrs:{model:e.addCateForm,rules:e.addCateFormRules,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"categoryName"}},[a("el-input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.addCateForm.categoryName,callback:function(t){e.$set(e.addCateForm,"categoryName",t)},expression:"addCateForm.categoryName"}})],1),a("el-form-item",{attrs:{label:"父级分类",prop:"selectedKeys"}},[a("el-cascader",{ref:"cascaderRef",attrs:{options:e.parentCateList,props:e.cascaderProps,clearable:""},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1),a("el-form-item",{attrs:{label:"级别",prop:"level"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addCateForm.level,callback:function(t){e.$set(e.addCateForm,"level",t)},expression:"addCateForm.level"}},[a("el-option",{attrs:{label:"一级",value:"0"}}),a("el-option",{attrs:{label:"二级",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"排序",prop:"rank"}},[a("el-input",{attrs:{placeholder:"请输入排序"},model:{value:e.addCateForm.rank,callback:function(t){e.$set(e.addCateForm,"rank",t)},expression:"addCateForm.rank"}})],1),a("el-form-item",{attrs:{label:"分类图标",prop:"log",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onUploadFile,"show-file-list":!1}},[e.addCateForm.log?a("el-image",{staticClass:"avatar",attrs:{src:e.addCateForm.log,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addCateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑分类",visible:e.editDialogVisible,width:"450px"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[a("el-form",{ref:"editFormRef",attrs:{model:e.eddCateForm,rules:e.eddCateFormRules,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"categoryName"}},[a("el-input",{model:{value:e.eddCateForm.categoryName,callback:function(t){e.$set(e.eddCateForm,"categoryName",t)},expression:"eddCateForm.categoryName"}})],1),a("el-form-item",{attrs:{label:"父级分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.eddCateForm.parentId,callback:function(t){e.$set(e.eddCateForm,"parentId",t)},expression:"eddCateForm.parentId"}},e._l(e.parentCateList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.categoryName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"级别",prop:"level"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.eddCateForm.level,callback:function(t){e.$set(e.eddCateForm,"level",t)},expression:"eddCateForm.level"}},[a("el-option",{attrs:{label:"一级",value:"0"}}),a("el-option",{attrs:{label:"二级",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"排序",prop:"rank"}},[a("el-input",{attrs:{placeholder:"请输入排序"},model:{value:e.eddCateForm.rank,callback:function(t){e.$set(e.eddCateForm,"rank",t)},expression:"eddCateForm.rank"}})],1),a("el-form-item",{attrs:{label:"分类图标",prop:"log",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.onUploadFileEdd,"show-file-list":!1}},[e.eddCateForm.log?a("el-image",{staticClass:"avatar",attrs:{src:e.eddCateForm.log,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editCateInfo}},[e._v("确 定")])],1)],1)],1),a("add-shop-category-cmp",{attrs:{area:e.search.area,addShopCategoryCmpVisible:e.addShopCategoryCmpVisible},on:{close:e.addShopCategoryCmpClose}}),a("edit-shop-category-cmp",{attrs:{area:e.search.area,editShopCategoryCmpVisible:e.editShopCategoryCmpVisible,selectData:e.selectData},on:{close:e.editShopCategoryCmpClose}}),a("category-add-goods-cmp",{attrs:{categoryAddGoodsCmpVisible:e.categoryAddGoodsCmpVisible,selectData:e.selectData},on:{close:e.categoryAddGoodsCmpClose}})],1)},o=[],n=(a("957b"),a("6a22"),a("dfce"),a("d211")),i=(a("6a61"),a("2e91")),s=a("809e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑分类",visible:e.editShopCategoryCmpVisible,"close-on-click-modal":!1,width:"450px","before-close":e.addCateDialogClosed},on:{"update:visible":function(t){e.editShopCategoryCmpVisible=t}}},[a("el-form",{ref:"addCateFormRef",attrs:{model:e.selectData,rules:e.addCateFormRules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.selectData.name,callback:function(t){e.$set(e.selectData,"name",t)},expression:"selectData.name"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"sorting"}},[a("el-input",{attrs:{placeholder:"请输入排序"},model:{value:e.selectData.sorting,callback:function(t){e.$set(e.selectData,"sorting",t)},expression:"selectData.sorting"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addCateDialogClosed}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1)},d=[],c={name:"editShopCategoryCmp",props:{editShopCategoryCmpVisible:{type:Boolean,default:!1},area:{type:String,default:""},selectData:{type:Object,default:function(){return{name:"",sorting:""}}}},data:function(){return{region:this.area,addCateFormRules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],sorting:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},methods:{addCate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.addCateFormRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return r=Object(n["a"])({},e.selectData),t.next=5,e.$http.post(e.$api.updateShopClassification,r);case 5:o=t.sent,o.data.success?(e.$message.success("保存成功"),e.addCateDialogClosed(),e.reload()):e.$message.error(o.data.msg);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},addCateDialogClosed:function(){this.$emit("close")}},inject:["reload"]},u=c,p=a("5d22"),m=Object(p["a"])(u,l,d,!1,null,"9efee6a8",null),f=m.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加分类",visible:e.addShopCategoryCmpVisible,"close-on-click-modal":!1,width:"450px","before-close":e.addCateDialogClosed},on:{"update:visible":function(t){e.addShopCategoryCmpVisible=t}}},[a("el-form",{ref:"addCateFormRef",attrs:{model:e.addCateForm,rules:e.addCateFormRules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.addCateForm.name,callback:function(t){e.$set(e.addCateForm,"name",t)},expression:"addCateForm.name"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"sorting"}},[a("el-input",{attrs:{placeholder:"请输入排序"},model:{value:e.addCateForm.sorting,callback:function(t){e.$set(e.addCateForm,"sorting",t)},expression:"addCateForm.sorting"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addCateDialogClosed}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1)},g=[],C={name:"addShopCategoryCmp",props:{addShopCategoryCmpVisible:{type:Boolean,default:!1},area:{type:String,default:""}},data:function(){return{addCateForm:{name:"",sorting:"",region:this.area},addCateFormRules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],sorting:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},methods:{addCate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.addCateFormRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return r=Object(n["a"])({},e.addCateForm),t.next=5,e.$http.post(e.$api.addShopClassification,r);case 5:o=t.sent,o.data.success?(e.$message.success("保存成功"),e.addCateDialogClosed(),e.reload()):e.$message.error(o.data.msg);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},addCateDialogClosed:function(){this.$emit("close")}},inject:["reload"]},b=C,v=Object(p["a"])(b,h,g,!1,null,"4cda6dfa",null),y=v.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加商品",visible:e.categoryAddGoodsCmpVisible,width:"450px","before-close":e.addCateDialogClosed},on:{"update:visible":function(t){e.categoryAddGoodsCmpVisible=t}}},[a("el-form",{ref:"addCateFormRef",attrs:{model:e.selectData,rules:e.addCateFormRules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"分类:"}},[a("span",[e._v(e._s(e.selectData.name))])]),a("el-form-item",{attrs:{label:"商品:",prop:"prodId"}},[a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择"},model:{value:e.selectData.prodId,callback:function(t){e.$set(e.selectData,"prodId",t)},expression:"selectData.prodId"}},e._l(e.goodslist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addCateDialogClosed}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1)},$=[],w=(a("7f64"),{name:"categoryAddGoodsCmp",props:{categoryAddGoodsCmpVisible:{type:Boolean,default:!1},selectData:{type:Object,default:function(){return{prodId:[]}}}},data:function(){return{addCateFormRules:{prodId:[{required:!0,message:"请选择商品",trigger:"change"}]},goodslist:[]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.apiProductQuery();case 2:case"end":return t.stop()}}),t)})))()},methods:{addCate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.addCateFormRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return r={shopClassificationId:e.selectData.id,prodId:e.selectData.prodId.join(",")},t.next=5,e.$http.post(e.$api.addShopClassificationProds,r);case 5:o=t.sent,o.data.success?(e.$message.success("保存成功"),e.addCateDialogClosed(),e.reload()):e.$message.error(o.data.msg);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},addCateDialogClosed:function(){this.$emit("close")},apiProductQuery:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={state:1,pageSize:9999},t.next=3,e.$http.post(e.$api.productQuery,a);case 3:r=t.sent,e.goodslist=r.data.data.list;case 5:case"end":return t.stop()}}),t)})))()}},inject:["reload"]}),F=w,k=Object(p["a"])(F,x,$,!1,null,"a4b79dca",null),S=k.exports,D=a("a937"),R={data:function(){return{editDialogVisible:!1,addCateDialogVisible:!1,cascaderProps:{expandTrigger:"hover",checkStrictly:!0,value:"id",label:"categoryName",children:"tress"},addCateForm:{id:null,platformType:0,categoryName:"",parentId:null,categoryCode:null,level:null,log:""},eddCateForm:{platformType:0,id:null,categoryName:"",parentId:null,categoryCode:null,level:null},addCateFormRules:{categoryName:[{required:!0,message:"请输入分类名称",trigger:"blur"}],level:[{required:!0,message:"请输入商品级别",trigger:"change"}],platformType:[{required:!0,message:"请输入商品类型",trigger:"change"}],selectedKeys:[{required:!1,message:"请输入父级分类",trigger:"change"}],rank:[{required:!0,message:"请输入分类排序",trigger:"change"}]},eddCateFormRules:{categoryName:[{required:!0,message:"请输入分类名称",trigger:"blur"}],level:[{required:!0,message:"请输入商品级别",trigger:"change"}],platformType:[{required:!0,message:"请输入商品类型",trigger:"change"}],rank:[{required:!0,message:"请输入分类排序",trigger:"change"}]},cateList:[],columns:[{label:"排序",prop:"rank",width:"auto"},{label:"分类名称",prop:"categoryName",width:"auto"},{label:"创建时间",prop:"createTime",width:"auto"},{label:"分类图标",type:"template",template:"log",width:"120"},{label:"级别",type:"template",template:"level",width:"auto"},{label:"操作",type:"template",template:"operate",width:"200",align:"center"}],columns2:[{label:"排序",prop:"rank",width:"auto"},{label:"分类名称",prop:"categoryName",width:"auto"},{label:"创建时间",prop:"createTime",width:"auto"},{label:"操作",type:"template",template:"operate",width:"319",align:"center"}],total:0,queryInfo:{pageNo:1,pageSize:10,platformType:null},parentCateList:[],selectedKeys:[],search:{area:"江苏省,苏州市,吴江区"},addShopCategoryCmpVisible:!1,roleCode:localStorage.getItem("roleCode"),editShopCategoryCmpVisible:!1,selectData:{},categoryAddGoodsCmpVisible:!1}},components:{areaSelectCmp2:s["a"],addShopCategoryCmp:y,editShopCategoryCmp:f,categoryAddGoodsCmp:S},mixins:[D["d"]],methods:{init:function(){this.fetch(),"003"!==this.roleCode&&"005"!==this.roleCode&&this.getParentCateList()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.fetch()},handleCurrentChange:function(e){this.queryInfo.pageNo=e,this.fetch()},fetch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(n["a"])(Object(n["a"])({},e.queryInfo),e.search),t.next=3,e.$http.post("/woho/product/category/query",a);case 3:r=t.sent,r.data.success?(e.cateList=r.data.data.list,e.total=r.data.data.total):e.$message.error(r.data.msg);case 5:case"end":return t.stop()}}),t)})))()},getParentCateList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/woho/product/category/findByTree/".concat(e.search.area));case 2:a=t.sent,e.parentCateList=a.data.data,e.parentCateList.unshift({id:"0",categoryName:"无上级分类"});case 5:case"end":return t.stop()}}),t)})))()},showAddCateDialog:function(){this.addCateDialogVisible=!0},parentCateChanged:function(){if(this.selectedKeys.length>0)return this.addCateForm.parentId=this.selectedKeys[this.selectedKeys.length-1],void(this.addCateForm.length=this.selectedKeys.length);this.addCateForm.parentId=null,this.addCateForm.level=null,console.log(this.addCateForm)},addCateDialogClosed:function(){this.$refs.addCateFormRef.resetFields(),this.selectedKeys=[],this.addCateForm.parentId=null,this.addCateForm.level=null},addCate:function(){var e=this;this.$refs.addCateFormRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.addCateForm.parentId=e.selectedKeys[0],e.addCateForm.area=e.search.area,t.next=6,e.$http.post("/woho/product/category/insert",e.addCateForm);case 6:if(r=t.sent,o=r.data,o.success){t.next=10;break}return t.abrupt("return",e.$message.error(o.msg));case 10:e.$message.success("添加商品分类成功！"),e.addCateDialogVisible=!1,e.init();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},delCateDialog:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return",t.$message.info("已取消删除"));case 5:if(o="","003"!==t.roleCode&&"005"!==t.roleCode){a.next=12;break}return a.next=9,t.$http.delete("/woho/product/category/delete/"+e+"/1");case 9:o=a.sent,a.next=15;break;case 12:return a.next=14,t.$http.delete("/woho/product/category/delete/"+e+"/0");case 14:o=a.sent;case 15:if(200===o.data.code){a.next=17;break}return a.abrupt("return",t.$message.error("删除分类失败！"));case 17:t.$message.success("删除分类成功！"),t.getParentCateList(),t.fetch();case 20:case"end":return a.stop()}}),a)})))()},editCateDialog:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("003"!==t.roleCode&&"005"!==t.roleCode){a.next=6;break}r={shopClassificationId:e.row.id,name:e.row.categoryName,sorting:e.row.rank},t.selectData=r,t.editShopCategoryCmpVisible=!0,a.next=12;break;case 6:return a.next=8,t.$http.post("/woho/product/category/findById/"+e.row.id);case 8:o=a.sent,t.eddCateForm=o.data,console.log(t.eddCateForm),t.editDialogVisible=!0;case 12:case"end":return a.stop()}}),a)})))()},addShopCategoryCmpClose:function(){this.addShopCategoryCmpVisible=!1},editShopCategoryCmpClose:function(){this.editShopCategoryCmpVisible=!1},categoryAddGoodsCmpClose:function(){this.categoryAddGoodsCmpVisible=!1},addShopCategory:function(){this.addShopCategoryCmpVisible=!0},categoryAddGoods:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,o,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={shopClassificationId:e.row.id},a.next=3,t.$http.post(t.$api.findShopClassifications,r);case 3:o=a.sent,i=o.data.data.list[0],s=o.data.data.list[0].productHeadList.map((function(e){return e.id})),t.selectData=Object(n["a"])(Object(n["a"])({},i),{},{prodId:s}),t.categoryAddGoodsCmpVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},editCateInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(n["a"])(Object(n["a"])({},e.eddCateForm),e.search),t.next=3,e.$http.put("/woho/product/category/update",a);case 3:r=t.sent,r.data.success?(e.$message.success("更新成功"),e.editDialogVisible=!1,e.init()):e.$message.error(r.data.msg);case 5:case"end":return t.stop()}}),t)})))()},onChildFn2:function(e){this.search.area=e,this.init()},onUploadFile:function(e){var t=this;this.uploadFile(e).then((function(e){t.addCateForm.log=e}))},onUploadFileEdd:function(e){var t=this;this.uploadFile(e).then((function(e){t.eddCateForm.log=e}))}},created:function(){this.init()}},A=R,I=(a("6490"),Object(p["a"])(A,r,o,!1,null,"467831a2",null));t["default"]=I.exports},"809e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-cascader",{attrs:{options:e.positionJson,size:e.size},on:{change:function(t){return e.handleChange(t)}},model:{value:e.areaGroup,callback:function(t){e.areaGroup=t},expression:"areaGroup"}})],1)},o=[],n=(a("3f4b"),a("6a22"),a("5f89"),a("dc37")),i={name:"areaSelectCmp2",props:{areaParent:{type:[String,Array],default:""},size:{type:String,default:""}},data:function(){return{area:[],positionJson:n}},methods:{handleChange:function(e){var t=this.positionJson.filter((function(t){return t.value===e[0]}));this.area=t[0].label,t=t[0].children.filter((function(t){return t.value===e[1]})),this.area=this.area+","+t[0].label,t=t[0].children.filter((function(t){return t.value===e[2]})),this.area=this.area+","+t[0].label,4===e.length&&(t=t[0].children.filter((function(t){return t.value===e[3]})),this.area=this.area+","+t[0].label),this.$emit("childFn2",this.area)}},computed:{areaGroup:{get:function(){var e=this.areaParent.split(","),t=[],a=this.positionJson.filter((function(t){return t.label===e[0]}));try{t.push(a[0].value),a=a[0].children.filter((function(t){return t.label===e[1]})),t.push(a[0].value),a=a[0].children.filter((function(t){return t.label===e[2]})),t.push(a[0].value),4===e.length&&(a=a[0].children.filter((function(t){return t.label===e[3]})),t.push(a[0].value))}catch(r){}return t},set:function(){}}}},s=i,l=a("5d22"),d=Object(l["a"])(s,r,o,!1,null,"18ba29b2",null);t["a"]=d.exports},a937:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s}));a("4318"),a("957b"),a("b4e6"),a("6a22"),a("2e4f"),a("80cf");var r={methods:{addAll:function(){for(var e=0,t=0,a=0;a<this.$refs.AddGoodsCmp.$data.multipleSelection.length;a++)this.goodsAndActivity.includes(this.$refs.AddGoodsCmp.$data.multipleSelection[a])?t++:(e++,this.$refs.AddGoodsCmp.$data.multipleSelection[a].prodId=this.$refs.AddGoodsCmp.$data.multipleSelection[a].id,this.$refs.AddGoodsCmp.$data.multipleSelection[a].id="",this.goodsAndActivity.push(this.$refs.AddGoodsCmp.$data.multipleSelection[a]));0!==t&&this.$notify.error({title:"错误",message:"有".concat(t,"个重复了")}),0!==e&&(this.$message.success("有".concat(e,"个添加成功")),this.dialogVisible=!1)},handleCurrentChange:function(){},onOldUpdate:function(e){this.oldUpdateIndex=e.$index},onUpdate:function(e){this.updateIndex=e.$index},onOldSave:function(){this.oldUpdateIndex=""},onSave:function(e){this.updateIndex=""},onDelete:function(e){this.goodsAndActivity.splice(e.$index,1)},onAddGoods:function(){this.dialogVisible=!0}}},o={methods:{uploadFile:function(e){var t=this._uploadFile(e);if(t)return this.$http.post("/common/oss/uploadFile",t).then((function(e){return e.data.data.webUrl}))},_uploadFile:function(e){var t="image/jpeg"===e.file.type||"image/png"===e.file.type,a=e.file.size/1024/1024<10;if(!t)return this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),!1;if(!a)return this.$message.error("上传头像图片大小不能超过 10MB!"),!1;var r=new FormData;return r.append("file",e.file),r}}},n={methods:{_validationNumber:function(e){return e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e},_verifyNumber:function(e){return e=e.replace(/[^\d]/g,""),e},_validationMoney:function(e){return e=e.replace(/[^\d.]/g,""),e=e.replace(/^0\d+|^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$"),e=e.replace(/\./g,""),e=e.replace("$#$","."),e=e.replace(/^(\d+)\.(\d\d).*$/,"$1.$2"),e}}},i={methods:{addAll:function(){for(var e=0,t=0,a=0;a<this.$refs.AddGoodsCmp.$data.multipleSelection.length;a++)this.goodsAndActivity.includes(this.$refs.AddGoodsCmp.$data.multipleSelection[a])?t++:(e++,this.$refs.AddGoodsCmp.$data.multipleSelection[a].samllProdId=this.$refs.AddGoodsCmp.$data.multipleSelection[a].id,this.goodsAndActivity.push(this.$refs.AddGoodsCmp.$data.multipleSelection[a]));0!==t&&this.$notify.error({title:"错误",message:"有".concat(t,"个重复了")}),0!==e&&(this.$message.success("有".concat(e,"个添加成功")),this.dialogVisible=!1)},handleCurrentChange:function(){},onOldUpdate:function(e){this.oldUpdateIndex=e.$index},onUpdate:function(e){this.updateIndex=e.$index},onOldSave:function(){this.oldUpdateIndex=""},onSave:function(e){this.updateIndex=""},onDelete:function(e){this.goodsAndActivity.splice(e.$index,1)},onAddGoods:function(){this.dialogVisible=!0}}},s={methods:{_export2Excel:function(e,t,r){var o=this;Promise.resolve().then(function(){var n=a("4bf8"),i=n.export_json_to_excel,s=o.formatJson(r,e);i(t,s,"统计")}.bind(null,a)).catch(a.oe)},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))}}}},b4e6:function(e,t,a){"use strict";var r=a("bbcf"),o=a("5501"),n=a("285a"),i=a("5152"),s=a("529d"),l=a("5c1e"),d=a("7389"),c=a("780c"),u=a("e9a9"),p=c("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,C="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var a,r,c,u,p,m,b=s(this),v=i(b.length),y=o(e,v),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=v-y):(a=x-2,r=h(f(n(t),0),v-y)),v+a-r>g)throw TypeError(C);for(c=l(b,r),u=0;u<r;u++)p=y+u,p in b&&d(c,u,b[p]);if(c.length=r,a<r){for(u=y;u<v-r;u++)p=u+r,m=u+a,p in b?b[m]=b[p]:delete b[m];for(u=v;u>v-r+a;u--)delete b[u-1]}else if(a>r)for(u=v-r;u>y;u--)p=u+r-1,m=u+a-1,p in b?b[m]=b[p]:delete b[m];for(u=0;u<a;u++)b[u+y]=arguments[u+2];return b.length=v-r+a,c}})},dfce:function(e,t,a){"use strict";var r=a("ebfe"),o=a("708d"),n=a("9ba3"),i=a("0c9c"),s=a("97d7");r("search",1,(function(e,t,a){return[function(t){var a=n(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var n=o(e),l=String(this),d=n.lastIndex;i(d,0)||(n.lastIndex=0);var c=s(n,l);return i(n.lastIndex,d)||(n.lastIndex=d),null===c?-1:c.index}]}))}}]);
//# sourceMappingURL=chunk-afb868aa.0e6bd033.js.map