(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-171e0510"],{"60b4":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-form",{attrs:{size:"mini","label-width":"80px"}},[o("el-form-item",{attrs:{label:"产品名称"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"供应商"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.shopName,callback:function(e){t.$set(t.form,"shopName",e)},expression:"form.shopName"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.apiGetGoodsList}},[t._v("查询")])],1)],1),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.addGoodList,size:"mini",height:"430",stripe:""},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),o("el-table-column",{attrs:{prop:"categoryId",label:"商品编号",width:"200",align:"center","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"200",align:"center"}}),o("el-table-column",{attrs:{prop:"categoryName",label:"分类",align:"center","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"shopName",label:"供应商",width:"200",align:"center","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"originalPrice",label:"销售价（元）",align:"center"}}),o("el-table-column",{attrs:{prop:"totalInventory",label:"库存",align:"center"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.onAdd(e)}}},[t._v("添加")])]}}])})],1),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.goodsTotal},on:{"current-change":t.handleCurrentChange}}),o("el-divider")],1)},n=[],a=o("d211"),l={name:"AddGoodsCmp",data:function(){return{childAddGoodList:[],addGoodList:[],goodsTotal:0,pageNo:1,multipleSelection:[],form:{}}},mounted:function(){},created:function(){this.apiGetGoodsList()},methods:{onAdd:function(t){this.$refs.multipleTable.toggleRowSelection(this.addGoodList[t.$index])},handleCurrentChange:function(t){this.pageNo=t,this.apiGetGoodsList()},handleSelectionChange:function(t){console.log(t),this.multipleSelection=t},apiGetGoodsList:function(){var t=this,e=Object(a["a"])({pageNo:this.pageNo,state:1},this.form);this.$http.post("/woho/product/head/query",e).then((function(e){t.addGoodList=e.data.data.list,t.goodsTotal=e.data.data.total}))}}},s=l,r=o("5d22"),c=Object(r["a"])(s,i,n,!1,null,"4f9e9739",null);e["a"]=c.exports},"8c65":function(t,e,o){},b4e6:function(t,e,o){"use strict";var i=o("bbcf"),n=o("5501"),a=o("285a"),l=o("5152"),s=o("529d"),r=o("5c1e"),c=o("7389"),d=o("780c"),u=o("e9a9"),p=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!f},{splice:function(t,e){var o,i,d,u,p,f,v=s(this),y=l(v.length),A=n(t,y),w=arguments.length;if(0===w?o=i=0:1===w?(o=0,i=y-A):(o=w-2,i=m(h(a(e),0),y-A)),y+o-i>b)throw TypeError(g);for(d=r(v,i),u=0;u<i;u++)p=A+u,p in v&&c(d,u,v[p]);if(d.length=i,o<i){for(u=A;u<y-i;u++)p=u+i,f=u+o,p in v?v[f]=v[p]:delete v[f];for(u=y;u>y-i+o;u--)delete v[u-1]}else if(o>i)for(u=y-i;u>A;u--)p=u+i-1,f=u+o-1,p in v?v[f]=v[p]:delete v[f];for(u=0;u<o;u++)v[u+A]=arguments[u+2];return v.length=y-i+o,d}})},b84d:function(t,e,o){"use strict";o("8c65")},ed32:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("LayoutBox",{attrs:{one:"立即报名"}},[o("h4",[t._v("关联商品")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsAndActivity,stripe:""}},[o("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center"}}),o("el-table-column",{attrs:{label:"限购量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.updateIndex===e.$index?o("el-input",{attrs:{type:"number"},model:{value:e.row.restrictionQuantity,callback:function(o){t.$set(e.row,"restrictionQuantity",t._n(o))},expression:"scope.row.restrictionQuantity"}}):o("p",[t._v(t._s(e.row.restrictionQuantity))])]}}])}),o("el-table-column",{attrs:{label:"运费",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.updateIndex===e.$index?o("el-input",{model:{value:e.row.postFee,callback:function(o){t.$set(e.row,"postFee",t._n(o))},expression:"scope.row.postFee"}}):o("p",[t._v(t._s(e.row.postFee))])]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.updateIndex===e.$index?o("el-button",{staticStyle:{color:"#ff8711",margin:"auto 5px"},attrs:{type:"text"},on:{click:function(o){return t.onSave(e)}}},[t._v("完成")]):o("el-button",{staticClass:"btn_update",attrs:{type:"text"},on:{click:function(o){return t.onUpdate(e)}}},[t._v("编辑")]),o("el-button",{staticClass:"btn_delete",attrs:{type:"text"},on:{click:function(o){return t.onDelete(e)}}},[t._v("删除")])]}}])})],1),o("div",{staticClass:"btn_box"},[o("el-button",{staticClass:"btn_add",attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加商品")])],1),o("el-divider"),o("div",{staticClass:"btn_group"},[o("el-button",{staticStyle:{width:"100px"},attrs:{type:"danger",size:"small",round:""},on:{click:t.onApply}},[t._v("完成报名")]),o("router-link",{attrs:{to:"/mark/plat/activity"}},[o("el-button",{staticStyle:{width:"100px"},attrs:{size:"small",round:""}},[t._v("取消")])],1)],1)],1),o("el-dialog",{attrs:{visible:t.dialogVisible,title:"添加商品",fullscreen:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("AddGoodsCmp",{ref:"AddGoodsCmp"}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{round:""},on:{click:function(e){t.dialogVisible=!1}}},[t._v("返 回")]),o("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){return t.addAll()}}},[t._v("添 加")])],1)],1)],1)},n=[],a=(o("4318"),o("957b"),o("b4e6"),o("2e4f"),o("1b00")),l=o("60b4"),s={name:"Goods",components:{LayoutBox:a["a"],AddGoodsCmp:l["a"]},data:function(){return{dialogVisible:!1,goodsAndActivity:[],updateIndex:"",activityData:{}}},created:function(){this.activityData=this.$route.query,this.activityData.activeId=this.$route.query.id},methods:{handleCurrentChange:function(){},onDelete:function(t){this.goodsAndActivity.splice(t.$index,1)},onUpdate:function(t){this.updateIndex=t.$index},onSave:function(t){console.log(t.row),this.updateIndex=""},onApply:function(){var t=this;if(this.goodsAndActivity.length<1)return this.$message.error("至少选择一件商品");this.goodsAndActivity.map((function(e){if(!(e.restrictionQuantity>0))throw t.$message.error("限购量不能为空"),SyntaxError("强制报错停止map");void 0===e.postFee&&(e.postFee=0),Object.assign(e,t.activityData)})),this.apiAddActivityProductRel()},addAll:function(){for(var t=0,e=0,o=0;o<this.$refs.AddGoodsCmp.$data.multipleSelection.length;o++)this.goodsAndActivity.includes(this.$refs.AddGoodsCmp.$data.multipleSelection[o])?e++:(t++,this.$refs.AddGoodsCmp.$data.multipleSelection[o].prodId=this.$refs.AddGoodsCmp.$data.multipleSelection[o].id,this.goodsAndActivity.push(this.$refs.AddGoodsCmp.$data.multipleSelection[o]));0!==t&&(this.dialogVisible=!1,this.$message.success("有".concat(t,"个添加成功"))),0!==e&&this.$notify.error({title:"错误",message:"有".concat(e,"个重复了")})},apiAddActivityProductRel:function(){var t=this;this.$http.post("/woho/activity/actProdRel/insert",this.goodsAndActivity).then((function(e){e.data.success?(t.$message.success("报名成功"),t.$router.push("/mark/plat/activity/myActivity")):t.$message.error(e.data.msg)}))}}},r=s,c=(o("b84d"),o("5d22")),d=Object(c["a"])(r,i,n,!1,null,"27f413a0",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-171e0510.25f95a48.js.map