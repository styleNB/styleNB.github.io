(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-259ebc2a"],{6657:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[t._v("秒杀")])])],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"tool_group"},[a("div",{staticClass:"btn_group"},[a("router-link",{attrs:{to:"/mark/list/bargainsList/addBargains"}},[a("el-button",{staticClass:"inquire",attrs:{type:"success",size:"small",icon:"el-icon-plus",round:""}},[t._v("新增活动")])],1)],1),a("el-form",{staticClass:"input_group",attrs:{model:t.form,inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{attrs:{placeholder:"产品名称"},model:{value:t.form.activeName,callback:function(e){t.$set(t.form,"activeName",e)},expression:"form.activeName"}})],1),a("el-form-item",{attrs:{label:"时间筛选 "}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}}),t._v("至 "),a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bargainsList,height:"520"}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"activeName",label:"名称",align:"center"}}),a("el-table-column",{attrs:{label:"活动时间",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.startTime)+" 至 "+t._s(e.row.endTime))])]}}])}),a("el-table-column",{attrs:{label:"活动状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[(new Date).getTime()<e.row.startTimeDate?a("span",[t._v("未开始")]):(new Date).getTime()>e.row.startTimeDate&&(new Date).getTime()<e.row.endTimeDate?a("span",[t._v("进行中")]):(new Date).getTime()>e.row.endTimeDate?a("span",[t._v("已结束")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0===e.row.state?"未启用":"已启用"))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{color:"#5bd9be"},attrs:{type:"text"},on:{click:function(a){return t.onUpdate(e)}}},[t._v("编辑")]),1===e.row.state?a("el-button",{staticStyle:{color:"#fd9a30"},attrs:{type:"text"},on:{click:function(a){return t.onEnd(e)}}},[t._v("终止")]):0===e.row.state?a("el-button",{staticStyle:{color:"#fd9a30"},attrs:{type:"text"},on:{click:function(a){return t.onStart(e)}}},[t._v("启用")]):t._e(),a("el-button",{staticStyle:{color:"#ff474c"},attrs:{type:"text"},on:{click:function(a){return t.onDelete(e)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.bargainsTotal},on:{"current-change":t.handleCurrentChange}})],1)],1)},n=[],r=(a("51d7"),a("957b"),a("b4e6"),a("6a22"),a("80cf"),{name:"BargainsList",data:function(){return{form:{},bargainsTotal:0,activeId:"",pageNo:1,bargainsList:[],activityData:{}}},created:function(){this.activeId=1,this.apiActivityList()},methods:{handleCurrentChange:function(t){},onEnd:function(t){var e=this;this.apiActivityUpOrDown(t.row.id,0).then((function(a){e.$message.success("已终止活动"),t.row.state=0}))},onStart:function(t){var e=this;this.apiActivityUpOrDown(t.row.id,1).then((function(a){e.$message.success("已启用活动"),t.row.state=1}))},onDelete:function(t){this.apiActivityDelete(t)},onUpdate:function(t){this.$router.push({path:"/mark/list/bargainsList/addBargains",query:{id:t.row.id}})},onContent:function(t){this.apiFindById(t.row.id)},onSearch:function(){this.apiActivityList()},apiActivityList:function(){var t=this,e={pageNo:this.pageNo,activeType:this.activeId,type:1};Object.assign(e,this.form),this.$http.post("/woho/activity/manage/query",e).then((function(e){t.bargainsList=e.data.data.list,t.bargainsTotal=e.data.data.total,t.bargainsList.map((function(t){t.startTimeDate=new Date(t.startTime.replace(/-/g,"/")).getTime(),t.endTimeDate=new Date(t.endTime.replace(/-/g,"/")).getTime()}))}))},apiActivityUpOrDown:function(t,e){var a=this;return this.$http.post("/woho/activity/manage/upOrDown/".concat(t,"/").concat(e)).then((function(t){t.data.success||a.$message.error(t.data.msg)}))},apiActivityDelete:function(t){var e=this;this.$http.delete("/woho/activity/manage/delete/".concat(t.row.id," ")).then((function(a){a.data.success&&(e.$message.success("删除成功"),e.bargainsList.splice(t.$index,1))}))}}}),s=r,o=(a("6880"),a("5d22")),c=Object(o["a"])(s,i,n,!1,null,"2bbfd8fa",null);e["default"]=c.exports},6880:function(t,e,a){"use strict";a("941f")},"941f":function(t,e,a){},b4e6:function(t,e,a){"use strict";var i=a("bbcf"),n=a("5501"),r=a("285a"),s=a("5152"),o=a("529d"),c=a("5c1e"),l=a("7389"),u=a("780c"),d=a("e9a9"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var a,i,u,d,p,m,v=o(this),w=s(v.length),y=n(t,w),T=arguments.length;if(0===T?a=i=0:1===T?(a=0,i=w-y):(a=T-2,i=h(f(r(e),0),w-y)),w+a-i>b)throw TypeError(g);for(u=c(v,i),d=0;d<i;d++)p=y+d,p in v&&l(u,d,v[p]);if(u.length=i,a<i){for(d=y;d<w-i;d++)p=d+i,m=d+a,p in v?v[m]=v[p]:delete v[m];for(d=w;d>w-i+a;d--)delete v[d-1]}else if(a>i)for(d=w-i;d>y;d--)p=d+i-1,m=d+a-1,p in v?v[m]=v[p]:delete v[m];for(d=0;d<a;d++)v[d+y]=arguments[d+2];return v.length=w-i+a,u}})}}]);
//# sourceMappingURL=chunk-259ebc2a.b19568cd.js.map