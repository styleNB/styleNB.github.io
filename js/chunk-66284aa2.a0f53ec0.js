(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66284aa2"],{1222:function(e,t,a){"use strict";a("1c42")},"1c42":function(e,t,a){},"5a7e":function(e,t,a){e.exports=a.p+"img/login2.ef736cf0.png"},"9ed6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[e._m(0),a("div",{staticClass:"login-wrap "},[a("div",{staticClass:"login_img_1"}),a("div",{staticClass:"login d-flex "},[e._m(1),a("div",{staticClass:"login_form p-2 mt-4"},[0===e.selectLoginTitle?a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules,"label-width":"80px"}},[a("el-form-item",[a("div",{staticClass:"login_title_group"},[a("a",{staticClass:"login_title",class:0===e.selectLoginTitle?"login_title_action":"",attrs:{href:"javascript:void(0);"},on:{click:function(t){e.selectLoginTitle=0}}},[e._v("密码登录")]),a("a",{staticClass:"login_title",class:1===e.selectLoginTitle?"login_title_action":"",attrs:{href:"javascript:void(0);"},on:{click:function(t){e.selectLoginTitle=1}}},[e._v("短信登录")])])]),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"请输入账户名/手机号",clearable:""},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-warning","show-password":"",placeholder:"请输入密码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",[a("el-button",{staticClass:"btn ",attrs:{round:""},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin("loginForm")}}},[e._v("立即登录")])],1)],1):e._e(),1===e.selectLoginTitle?a("el-form",{ref:"SMSloginForm",attrs:{model:e.SMSloginForm,rules:e.SMSloginRules,"label-width":"80px"}},[a("el-form-item",[a("div",{staticClass:"login_title_group"},[a("a",{staticClass:"login_title",class:0===e.selectLoginTitle?"login_title_action":"",attrs:{href:"javascript:void(0);"},on:{click:function(t){e.selectLoginTitle=0}}},[e._v("密码登录")]),a("a",{staticClass:"login_title",class:1===e.selectLoginTitle?"login_title_action":"",attrs:{href:"javascript:void(0);"},on:{click:function(t){e.selectLoginTitle=1}}},[e._v("短信登录")])])]),a("el-form-item",{attrs:{prop:"phoneNum"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"请输入手机号",clearable:""},model:{value:e.SMSloginForm.phoneNum,callback:function(t){e.$set(e.SMSloginForm,"phoneNum",t)},expression:"SMSloginForm.phoneNum"}})],1),a("el-form-item",{attrs:{prop:"verificationCode"}},[a("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.SMSloginForm.verificationCode,callback:function(t){e.$set(e.SMSloginForm,"verificationCode",t)},expression:"SMSloginForm.verificationCode"}},[a("template",{slot:"append"},[e.countdown?a("el-button",{staticStyle:{width:"120px",cursor:"not-allowed"}},[e._v(e._s(e.countdown)+"秒后重发")]):a("el-button",{staticStyle:{width:"120px"},on:{click:e.getVerificationCode}},[e._v("获取验证码")])],1)],2)],1),a("el-form-item",[a("el-button",{staticClass:"btn ",attrs:{round:""},nativeOn:{click:function(t){return t.preventDefault(),e.onSMSlogin(t)}}},[e._v("立即登录")])],1)],1):e._e()],1)])])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"login-header   "},[r("div",[r("div",{staticClass:"pt-2 "},[r("div",{staticClass:"login-img "},[r("img",{attrs:{src:a("5a7e"),alt:""}})]),r("div",{staticClass:"text-center text-white pt-1"},[e._v("———— 蜗视商家后台 ————")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login_body "},[a("div",{staticClass:"pl-4 mt-5"},[a("div",{staticClass:"login_ha"},[a("h1",[e._v("HALLO ;)")])]),a("div",{staticClass:"fs-lg"},[e._v("欢迎使用蜗视商家后台")])]),a("div",{staticClass:"login_img"})])}],o=(a("6a61"),a("2e91")),i=a("d211"),s=a("cf6b"),l={data:function(){return{loginForm:{username:"",password:""},SMSloginForm:{verificationCode:"",phoneNum:""},loginRules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},SMSloginRules:{phoneNum:[{required:!0,message:"请输入手机号",trigger:"blur"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},userId:"",selectLoginTitle:0,countdown:0}},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["fetchGetMIMCToken"])),{},{handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post(e.$api.adminLogin,e.loginForm).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userId=a.data.data.userId,localStorage.token=a.headers.authorization,localStorage.shopId=a.data.data.shopId,localStorage.userId=a.data.data.userId,localStorage.nickName=a.data.data.userName,localStorage.userImage=a.data.data.userImage||"",localStorage.userArea=a.data.data.userArea,localStorage.roleCode=a.data.data.roleCode,200!==a.data.code){t.next=15;break}return t.next=11,e.fetchGetMIMCToken(a.data.data.userId);case 11:e.$router.push("/main"),e.$notify({title:"成功",message:"登录成功",type:"success",duration:2500}),t.next=16;break;case 15:e.$notify.error(a.data.msg);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},onSMSlogin:function(){var e=this;this.$refs.SMSloginForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return r={username:e.SMSloginForm.phoneNum,verificationCode:e.SMSloginForm.verificationCode,isVerificationCodeLogin:!0},t.next=5,e.$http.post(e.$api.adminLogin,r).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userId=a.data.data.userId,localStorage.token=a.headers.authorization,localStorage.shopId=a.data.data.shopId,localStorage.userId=a.data.data.userId,localStorage.nickName=a.data.data.userName,localStorage.userImage=a.data.data.userImage||"",localStorage.userArea=a.data.data.userArea,localStorage.roleCode=a.data.data.roleCode,200!==a.data.code){t.next=15;break}return t.next=11,e.fetchGetMIMCToken(a.data.data.userId);case 11:e.$router.push("/main"),e.$notify({title:"成功",message:"登录成功",type:"success",duration:2500}),t.next=16;break;case 15:e.$notify.error(a.data.msg);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getVerificationCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.SMSloginForm.phoneNum),/^1[3456789]\d{9}$/.test(e.SMSloginForm.phoneNum)){t.next=3;break}return t.abrupt("return",e.$message.error("手机号码有误，请重填"));case 3:return a={phoneNum:e.SMSloginForm.phoneNum,type:3},t.next=6,e.$logisticsHttp.post(e.$api.smscode,a);case 6:if(r=t.sent,r.data.success){t.next=9;break}return t.abrupt("return",e.$message.error(r.data.msg));case 9:e.countdown=60,n=setInterval((function(){e.countdown--,0===e.countdown&&clearInterval(n)}),1e3);case 11:case"end":return t.stop()}}),t)})))()}})},c=l,u=(a("1222"),a("5d22")),d=Object(u["a"])(c,r,n,!1,null,"325663d8",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-66284aa2.a0f53ec0.js.map