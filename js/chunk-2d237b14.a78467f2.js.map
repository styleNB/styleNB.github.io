{"version":3,"sources":["webpack:///./src/views/role/Role.vue?173d","webpack:///src/views/role/Role.vue","webpack:///./src/views/role/Role.vue?de6e","webpack:///./src/views/role/Role.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","staticStyle","on","$event","handleSearchList","handleResetSearch","queryInfo","fetch","model","value","callback","$$v","$set","expression","addDialogVisible","tableData","scopedSlots","_u","key","fn","scope","handleSelectMenu","$index","row","handleSelectResource","id","showEditDialog","handleDelete","pageNo","pageSize","total","handleSizeChange","handleCurrentChange","addDialogClosed","ref","addForm","addFormRules","slot","addRole","editDialogVisible","editDialogClosed","editForm","editFormRules","editUserInfo","setRoleDialogVisible","rolevisible","_l","item","_s","loginName","role","roleName","userId","name","saveRoleInfo","staticRenderFns","data","roleCode","enableStatus","Object","assign","defaultListQuery","rolesLsit","roleId","userName","created","methods","newSize","console","log","newPage","$refs","addFormRef","resetFields","editFormRef","validate","$router","push","component"],"mappings":"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","file":"js/chunk-2d237b14.a78467f2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('layout-box',{attrs:{\"one\":\"用户管理\",\"two\":\"角色列表\"}},[_c('el-card',{staticClass:\"mb-1\",attrs:{\"shadow\":\"never\"}},[_c('div',[_c('i',{staticClass:\"el-icon-search\"}),_c('span',[_vm._v(\"筛选搜索\")]),_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleSearchList()}}},[_vm._v(\" 查询结果 \")]),_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"15px\"},attrs:{\"size\":\"small\"},on:{\"click\":_vm.handleResetSearch}},[_vm._v(\"重置\")])],1),_c('div',{staticClass:\"mt-1\"},[_c('el-form',{attrs:{\"inline\":true,\"size\":\"small\",\"label-width\":\"140px\",\"model\":_vm.queryInfo}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入角色名称\",\"clearable\":\"\"},on:{\"clear\":_vm.fetch},model:{value:(_vm.queryInfo.roleName),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"roleName\", $$v)},expression:\"queryInfo.roleName\"}})],1)],1)],1)]),_c('el-button',{staticClass:\"mb-1\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"新增角色\")]),_c('el-table',{attrs:{\"data\":_vm.tableData,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"roleCode\",\"align\":\"center\",\"label\":\"角色编码\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"align\":\"center\",\"label\":\"角色名称\",\"width\":\"260\"}}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"align\":\"center\",\"label\":\"创建时间\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-row',[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleSelectMenu(scope.$index, scope.row)}}},[_vm._v(\"分配权限 \")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleSelectResource(scope.id, scope.row)}}},[_vm._v(\"分配用户 \")])],1),_c('el-row',[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}},[_vm._v(\" 编辑 \")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row.id)}}},[_vm._v(\"删除 \")])],1)]}}])})],1),_c('div',{staticClass:\"mt-1 text-right\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.queryInfo.pageNo,\"page-sizes\":[2, 5, 10, 20],\"page-size\":_vm.queryInfo.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加角色\",\"width\":\"30%\",\"visible\":_vm.addDialogVisible},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"label-width\":\"100px\",\"model\":_vm.addForm,\"rules\":_vm.addFormRules}},[_c('el-form-item',{attrs:{\"label\":\"角色编码\",\"prop\":\"roleCode\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.addForm.roleCode),callback:function ($$v) {_vm.$set(_vm.addForm, \"roleCode\", $$v)},expression:\"addForm.roleCode\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.addForm.roleName),callback:function ($$v) {_vm.$set(_vm.addForm, \"roleName\", $$v)},expression:\"addForm.roleName\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRole}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑角色\",\"width\":\"30%\",\"visible\":_vm.editDialogVisible},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.editDialogClosed}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"label-width\":\"100px\",\"model\":_vm.editForm,\"rules\":_vm.editFormRules}},[_c('el-form-item',{attrs:{\"label\":\"角色编码\",\"prop\":\"roleCode\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.editForm.roleCode),callback:function ($$v) {_vm.$set(_vm.editForm, \"roleCode\", $$v)},expression:\"editForm.roleCode\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.editForm.roleName),callback:function ($$v) {_vm.$set(_vm.editForm, \"roleName\", $$v)},expression:\"editForm.roleName\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配用户\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.rolevisible}},[_c('div',[_vm._l((_vm.userName),function(item){return _c('p',{key:item.id},[_vm._v(\"当前用户：\"+_vm._s(item.loginName))])}),_c('p',[_vm._v(\"当前角色：\"+_vm._s(_vm.role.roleName))]),_c('p',[_vm._v(\"分配用户 \"),_c('el-select',{staticStyle:{\"width\":\"80%\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\",\"placeholder\":\"请选择用户\"},model:{value:(_vm.userId),callback:function ($$v) {_vm.userId=$$v},expression:\"userId\"}},_vm._l((_vm.rolesLsit),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1)],2),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <layout-box one=\"用户管理\" two=\"角色列表\">\r\n      <el-card shadow=\"never\" class=\"mb-1\">\r\n        <div>\r\n          <i class=\"el-icon-search\"></i>\r\n          <span>筛选搜索</span>\r\n          <el-button\r\n            style=\"float: right\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click=\"handleSearchList()\"\r\n          >\r\n            查询结果\r\n          </el-button>\r\n          <el-button style=\"float:right;margin-right: 15px\" size=\"small\" @click=\"handleResetSearch\">重置</el-button>\r\n\r\n        </div>\r\n        <div class=\"mt-1\">\r\n          <el-form :inline=\"true\" size=\"small\" label-width=\"140px\" :model=\"queryInfo\">\r\n            <el-form-item label=\"角色名称\">\r\n              <el-input v-model=\"queryInfo.roleName\" placeholder=\"输入角色名称\" clearable @clear=\"fetch\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n\r\n      <el-button\r\n        class=\"mb-1\"\r\n        type=\"primary\"\r\n        size=\"small\"\r\n        @click=\"addDialogVisible = true\"\r\n      >新增角色</el-button>\r\n      <el-table :data=\"tableData\" border>\r\n        <el-table-column prop=\"roleCode\" align=\"center\" label=\"角色编码\" width=\"100\" />\r\n        <el-table-column prop=\"roleName\" align=\"center\" label=\"角色名称\" width=\"260\" />\r\n        <el-table-column prop=\"createTime\" align=\"center\" label=\"创建时间\" />\r\n        <!-- <el-table-column label=\"是否启用\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.enableStatus\"\r\n              :active-value=\"0\"\r\n              :inactive-value=\"1\"\r\n              @change=\"handleStatusChange(scope.row.id)\"\r\n            >\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column> -->\r\n        <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-row>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                @click=\"handleSelectMenu(scope.$index, scope.row)\"\r\n              >分配权限\r\n              </el-button>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                @click=\"handleSelectResource(scope.id, scope.row)\"\r\n              >分配用户\r\n              </el-button>\r\n            </el-row>\r\n            <el-row>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                @click=\"showEditDialog(scope.row.id)\"\r\n              >\r\n                编辑\r\n              </el-button>\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                @click=\"handleDelete(scope.row.id)\"\r\n              >删除\r\n              </el-button>\r\n            </el-row>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"mt-1 text-right\">\r\n        <el-pagination\r\n          background\r\n          :current-page=\"queryInfo.pageNo\"\r\n          :page-sizes=\"[2, 5, 10, 20]\"\r\n          :page-size=\"queryInfo.pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n      <!-- 添加角色 -->\r\n      <el-dialog\r\n        title=\"添加角色\"\r\n        width=\"30%\"\r\n        :visible.sync=\"addDialogVisible\"\r\n        @close=\"addDialogClosed\"\r\n      >\r\n        <!-- 内容主体区域 -->\r\n        <el-form\r\n          ref=\"addFormRef\"\r\n          label-width=\"100px\"\r\n          :model=\"addForm\"\r\n          :rules=\"addFormRules\"\r\n        >\r\n          <el-form-item label=\"角色编码\" prop=\"roleCode\">\r\n            <el-input v-model=\"addForm.roleCode\" size=\"small\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n            <el-input v-model=\"addForm.roleName\" size=\"small\" />\r\n          </el-form-item>\r\n        </el-form>\r\n        <!-- 底部区域 -->\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addRole\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n\r\n      <!-- 编辑 -->\r\n      <el-dialog\r\n        title=\"编辑角色\"\r\n        width=\"30%\"\r\n        :visible.sync=\"editDialogVisible\"\r\n        @close=\"editDialogClosed\"\r\n      >\r\n        <!-- 内容主体区域 -->\r\n        <el-form\r\n          ref=\"editFormRef\"\r\n          label-width=\"100px\"\r\n          :model=\"editForm\"\r\n          :rules=\"editFormRules\"\r\n        >\r\n          <el-form-item label=\"角色编码\" prop=\"roleCode\">\r\n            <el-input v-model=\"editForm.roleCode\" size=\"small\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n            <el-input v-model=\"editForm.roleName\" size=\"small\" />\r\n          </el-form-item>\r\n        </el-form>\r\n        <!-- 底部区域 -->\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n      <!-- 分配用户对话框 -->\r\n      <el-dialog title=\"分配用户\" :visible.sync=\"setRoleDialogVisible\" width=\"30%\" @close=\"rolevisible\">\r\n        <div>\r\n          <p v-for=\"item in userName\" :key=\"item.id\">当前用户：{{ item.loginName }}</p>\r\n          <p>当前角色：{{ role.roleName }}</p>\r\n          <p>分配用户\r\n            <el-select\r\n              v-model=\"userId\"\r\n              filterable\r\n              allow-create\r\n              style=\"width: 80%\"\r\n              default-first-option\r\n              placeholder=\"请选择用户\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in rolesLsit\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select></p>\r\n        </div>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"saveRoleInfo\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n      <!--  -->\r\n    </layout-box>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst defaultListQuery = {\r\n  pageNo: 1,\r\n  pageSize: 10,\r\n  roleName: null\r\n}\r\nexport default {\r\n  data() {\r\n    return {\r\n      setRoleDialogVisible: false,\r\n      addFormRules: {\r\n        roleName: [\r\n          { required: true, message: '请输入姓名', trigger: 'blur' },\r\n          {\r\n            min: 2,\r\n            max: 10,\r\n            message: '用户名的长度在3~10个字符之间',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        roleCode: [\r\n          { required: true, message: '请输入编码', trigger: 'blur' },\r\n          {\r\n            min: 3,\r\n            max: 10,\r\n            message: '用户名的长度在3~10个字符之间',\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      },\r\n      editFormRules: {\r\n        roleName: [\r\n          { required: true, message: '请输入姓名', trigger: 'blur' },\r\n          {\r\n            min: 2,\r\n            max: 10,\r\n            message: '用户名的长度在2~10个字符之间',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        roleCode: [\r\n          { required: true, message: '请输入编码', trigger: 'blur' },\r\n          {\r\n            min: 3,\r\n            max: 10,\r\n            message: '用户名的长度在3~10个字符之间',\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      },\r\n      addForm: {\r\n        roleName: '',\r\n        roleCode: ''\r\n      },\r\n      editForm: {},\r\n      addDialogVisible: false,\r\n      editDialogVisible: false,\r\n      tableData: [],\r\n      enableStatus: null,\r\n      queryInfo: Object.assign({}, defaultListQuery),\r\n      total: 0,\r\n      rolesLsit: [],\r\n      // 当前分配的用户Id\r\n      userId: '',\r\n      // 当前角色的id\r\n      roleId: '',\r\n      role: '',\r\n      userName: [],\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.fetch()\r\n  },\r\n\r\n  methods: {\r\n    // // 是否启用\r\n    // handleStatusChange(id) {\r\n    //   this.$confirm('是否要修改该状态', '提示', {\r\n    //     confirmButtonText: '确定',\r\n    //     cancelButtonText: '取消',\r\n    //     type: 'warning'\r\n    //   }).then(() => {\r\n    //     this.$http.post(`/woho/sys/user/enableOrdisable/${id}/${this.enableStatus}`).then(res => {\r\n    //       this.$message({\r\n    //         type: 'success',\r\n    //         message: '修改成功!'\r\n    //       })\r\n    //     })\r\n    //   }).catch(() => {\r\n    //     this.$message({\r\n    //       type: 'info',\r\n    //       message: '取消修改'\r\n    //     })\r\n    //     this.fetch()\r\n    //   })\r\n    // },\r\n    // 分配用户的对话框\r\n    async handleSelectResource(id, role) {\r\n      this.role = role\r\n      this.roleId = role.id\r\n      const resq = await this.$http.post(`/woho/sys/userRole/findByRoleId/${role.id}`)\r\n      this.userName = resq.data\r\n      const res = await this.$http.post('/woho/sys/user/query', this.queryInfo)\r\n      this.setRoleDialogVisible = true\r\n      this.rolesLsit = res.data.data.list\r\n    },\r\n    // 角色对话框的关闭事件\r\n    rolevisible() {\r\n      this.userId = ''\r\n    },\r\n    // 分配用户\r\n    async saveRoleInfo() {\r\n      if (!this.userId) {\r\n        return this.$message.error('请选择要分配的用户')\r\n      }\r\n      const res = await this.$http.post(`/woho/sys/userRole/findByRoleId/${this.roleId}`)\r\n      if (res.data.code !== 200) {\r\n        this.$message.success('分配用户成功')\r\n        this.setRoleDialogVisible = false\r\n      } else {\r\n        this.$message.error(res.data.msg)\r\n      }\r\n    },\r\n    // 角色分页数据\r\n    async fetch() {\r\n      const res = await this.$http.post('/woho/sys/role/query', this.queryInfo)\r\n      this.tableData = res.data.data.list\r\n      this.total = res.data.data.total\r\n    },\r\n    handleSizeChange(newSize) {\r\n      this.queryInfo.pageSize = newSize\r\n      this.fetch()\r\n    },\r\n    handleCurrentChange(newPage) {\r\n      console.log(newPage)\r\n      this.queryInfo.pageNo = newPage\r\n      this.fetch()\r\n    },\r\n    addDialogClosed() {\r\n      this.$refs.addFormRef.resetFields()\r\n    },\r\n\r\n    // 添加角色\r\n    async addRole() {\r\n      this.$refs.addFormRef.validate(async valid => {\r\n        if (!valid) return this.$message.error('资料填写完整')\r\n        const res = await this.$http.post('/woho/sys/role/insert', this.addForm)\r\n        if (res.data.success) {\r\n          this.$message.success('添加角色成功！')\r\n          // 隐藏添加用户的对话框\r\n          this.addDialogVisible = false\r\n          // 重新获取用户列表数据\r\n          this.fetch()\r\n        } else {\r\n          this.$message.error(res.data.msg)\r\n        }\r\n      })\r\n    },\r\n    // 删除\r\n    async handleDelete(id) {\r\n      // 弹框询问用户是否删除数据\r\n      const confirmResult = await this.$confirm(\r\n        '此操作将永久删除该角色, 是否继续?',\r\n        '提示',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }\r\n      ).catch(err => err)\r\n\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消删除')\r\n      }\r\n      const res = await this.$http.delete('/woho/sys/role/delete/' + id)\r\n      // console.log(res)\r\n      if (res.data.code !== 200) {\r\n        return this.$message.error('删除角色失败！')\r\n      }\r\n      this.$message.success('删除角色成功！')\r\n      this.fetch()\r\n    },\r\n\r\n    // 修改用户\r\n    async showEditDialog(id) {\r\n      const res = await this.$http.post('/woho/sys/role/findById/' + id)\r\n      this.editForm = res.data\r\n      this.editDialogVisible = true\r\n    },\r\n    // 修改用户对话框关闭事件\r\n    editDialogClosed() {\r\n      this.$refs.editFormRef.resetFields()\r\n    },\r\n    // 修改信息并提交\r\n    editUserInfo() {\r\n      this.$refs.editFormRef.validate(async valid => {\r\n        if (!valid) return this.$message.error('请填写完整')\r\n        const res = await this.$http.put('/woho/sys/role/update', this.editForm)\r\n        if (res.data.code !== 200) {\r\n          return this.$message.error('更新用户信息失败！')\r\n        }\r\n        // 提示修改成功\r\n        this.$message.success('更改用户信息成功')\r\n        // 关闭对话框\r\n        this.editDialogVisible = false\r\n        //  刷新列表数据\r\n        this.fetch()\r\n      })\r\n    },\r\n\r\n    // 分配权限\r\n    handleSelectMenu(index, row) {\r\n      this.$router.push({ path: '/role/menu', query: { roleId: row.id }})\r\n    },\r\n    handleSearchList() {\r\n      this.queryInfo.pageNo = 1\r\n      this.fetch()\r\n    },\r\n    handleResetSearch() {\r\n      this.queryInfo = Object.assign({}, defaultListQuery)\r\n      this.fetch()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=5799aaa1&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}