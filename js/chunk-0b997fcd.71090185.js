(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b997fcd"],{"13cf":function(e,t,r){var a=r("9ba3"),o=r("994c"),n="["+o+"]",s=RegExp("^"+n+n+"*"),i=RegExp(n+n+"*$"),l=function(e){return function(t){var r=String(a(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(i,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},3098:function(e,t,r){"use strict";var a=r("bbcf"),o=r("6921"),n=r("4c16"),s=r("631e"),i=r("2fb1"),l=r("60ce").f,c=r("7e26"),u=n.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new u(e):void 0===e?u():u(e);return""===e&&(f[t]=!0),t};c(m,u);var d=m.prototype=u.prototype;d.constructor=m;var p=d.toString,h="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;l(d,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=p.call(e);if(s(f,e))return"";var r=h?t.slice(7,-1):t.replace(g,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:m})}},"4c09":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r("ed16");function o(e){if(Array.isArray(e))return Object(a["a"])(e)}r("f869"),r("3098"),r("eb14"),r("3e68"),r("4d20"),r("2181"),r("659e");function n(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var s=r("69a9");function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return o(e)||n(e)||Object(s["a"])(e)||i()}},"65ba":function(e,t,r){"use strict";var a=r("6921"),o=r("4c16"),n=r("adc7"),s=r("58e4"),i=r("631e"),l=r("40e6"),c=r("d922"),u=r("6a27"),f=r("e4bd"),m=r("4035"),d=r("889a").f,p=r("37cb").f,h=r("60ce").f,g=r("13cf").trim,b="Number",y=o[b],v=y.prototype,_=l(m(v))==b,w=function(e){var t,r,a,o,n,s,i,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=g(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+c}for(n=c.slice(2),s=n.length,i=0;i<s;i++)if(l=n.charCodeAt(i),l<48||l>o)return NaN;return parseInt(n,a)}return+c};if(n(b,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var $,I=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof I&&(_?f((function(){v.valueOf.call(r)})):l(r)!=b)?c(new y(w(t)),r,I):w(t)},A=a?d(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),C=0;A.length>C;C++)i(y,$=A[C])&&!i(I,$)&&h(I,$,p(y,$));I.prototype=v,v.constructor=I,s(o,b,I)}},"69a9":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("3e68"),r("eb27"),r("1e6a"),r("4d20"),r("8d56"),r("2181");var a=r("ed16");function o(e,t){if(e){if("string"===typeof e)return Object(a["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(e,t):void 0}}},"95a8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("LayoutBox",{attrs:{one:e.$route.query.userId?"编辑区级管理账号":"添加区级管理账号"}},[r("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form.user,rules:e.rules,size:"small","label-position":"left"}},[r("el-form-item",{attrs:{label:"用户账号",prop:"loginName"}},[r("el-input",{staticClass:"input_width",model:{value:e.form.user.loginName,callback:function(t){e.$set(e.form.user,"loginName",t)},expression:"form.user.loginName"}})],1),r("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[r("el-input",{ref:"password",staticClass:"input_width",attrs:{type:e.type,onfocus:"this.type='password'",autocomplete:"new-password",clearable:""},on:{blur:e.onBlur},model:{value:e.form.user.password,callback:function(t){e.$set(e.form.user,"password",t)},expression:"form.user.password"}})],1),r("el-form-item",{attrs:{label:"用户昵称"}},[r("el-input",{staticClass:"input_width",model:{value:e.form.user.name,callback:function(t){e.$set(e.form.user,"name",t)},expression:"form.user.name"}})],1),r("el-form-item",{attrs:{label:"用户邮箱"}},[r("el-input",{staticClass:"input_width",model:{value:e.form.user.email,callback:function(t){e.$set(e.form.user,"email",t)},expression:"form.user.email"}})],1),r("el-form-item",{attrs:{label:"手机号码"}},[r("el-input",{staticClass:"input_width",model:{value:e.form.user.mobile,callback:function(t){e.$set(e.form.user,"mobile",t)},expression:"form.user.mobile"}})],1),r("el-form-item",{attrs:{label:"用户性别"}},[r("el-radio",{attrs:{label:"0"},model:{value:e.form.user.gender,callback:function(t){e.$set(e.form.user,"gender",t)},expression:"form.user.gender"}},[e._v("男")]),r("el-radio",{attrs:{label:"1"},model:{value:e.form.user.gender,callback:function(t){e.$set(e.form.user,"gender",t)},expression:"form.user.gender"}},[e._v("女")]),r("el-radio",{attrs:{label:"2"},model:{value:e.form.user.gender,callback:function(t){e.$set(e.form.user,"gender",t)},expression:"form.user.gender"}},[e._v("其他")])],1),e._l(e.form.list,(function(t,a){return r("el-form-item",{key:a,attrs:{label:"地区",required:""}},[r("div",{staticClass:"area"},[r("el-cascader",{attrs:{options:e.positionJson},on:{change:function(t){return e.handleChange(t,a)}},model:{value:e.form.list[a].areaCmp,callback:function(t){e.$set(e.form.list[a],"areaCmp",t)},expression:"form.list[i].areaCmp"}}),r("span",{staticClass:"iconfont icon_jian ml-1",on:{click:function(t){return e.onDeleteArea(a)}}},[e._v("")])],1),e._l(t.list,(function(o,n){return r("el-form",{key:n,attrs:{size:"small",inline:""}},[r("el-form-item",[r("span",{staticClass:"iconfont icon_jian",on:{click:function(t){return e.onDeleteCategory(a,n)}}},[e._v("")])]),r("el-form-item",{attrs:{label:"分类",required:""}},[r("el-select",{attrs:{placeholder:"请选择分类"},on:{change:function(t){return e.onCategory(t,a,n)}},model:{value:o.categoryId,callback:function(t){e.$set(o,"categoryId",t)},expression:"item1.categoryId"}},e._l(e.categoryList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.categoryName,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"提成",required:""}},[r("el-input",{staticStyle:{width:"215px"},attrs:{placeholder:"请输入提成"},model:{value:o.percent,callback:function(t){e.$set(o,"percent",t)},expression:"item1.percent"}}),r("span",{staticClass:"note"},[e._v("注：5%就输入0.5")])],1),t.list.length-1===n?r("el-form-item",[r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.onAddCategory(a)}}},[e._v("添加分类")])],1):e._e()],1)}))],2)})),r("el-form-item",[r("el-button",{attrs:{type:"success"},on:{click:e.onAddArea}},[e._v("添加地区")])],1),r("el-form-item",[e.$route.query.userId?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSave("form")}}},[e._v("保存")]):r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.$router.back(-1)}}},[e._v("取消")])],1)],2)],1)],1)},o=[],n=(r("51d7"),r("3f4b"),r("5cff"),r("957b"),r("b4e6"),r("65ba"),r("4d20"),r("6a22"),r("8d56"),r("5f89"),r("dcd4"),r("d211")),s=r("4c09"),i=r("1b00"),l=r("dc37"),c={name:"admin_district_user_add",components:{LayoutBox:i["a"]},data:function(){return{form:{user:{loginName:"",password:""},list:[{area:"",areaCmp:[],list:[{categoryId:""}]}]},rules:{loginName:[{required:!0,message:"请输入用户账号",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"change"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:6,max:64,message:"长度在 6 到 32 个字符",trigger:"change"}]},userPageNo:1,userList:[],categoryList:[],loading:!1,positionJson:l,type:"text"}},methods:{onBlur:function(){this.form.user.password||(this.type="text")},handleChange:function(e,t){if(!this._selectArea(e,t))return!1;if(!e)return!1;var r=this.positionJson.filter((function(t){return t.value===e[0]}));this.form.list[t].area=r[0].label,r=r[0].children.filter((function(t){return t.value===e[1]})),this.form.list[t].area=this.form.list[t].area+","+r[0].label,r=r[0].children.filter((function(t){return t.value===e[2]})),this.form.list[t].area=this.form.list[t].area+","+r[0].label},onAddArea:function(){this._rulesList()&&this.form.list.push({area:"",list:[{categoryId:""}]})},onDeleteArea:function(e){this.form.list.splice(e,1)},onCategory:function(e,t,r){var a=this;this.apiCategoryFindById(e).then((function(e){a.form.list[t].list[r].categoryName=e}))},onAddCategory:function(e){this._rulesList()&&this.form.list[e].list.push({categoryId:""})},onDeleteCategory:function(e,t){this.form.list[e].list.splice(t,1)},onSubmit:function(e){console.log(this.form),this._rulesForm(e)&&this.apiAddAreauser()},onSave:function(e){this._rulesForm(e)&&this.apiAreauserUpdate()},_selectArea:function(e,t){var r=this,a=!0;return this.form.list.forEach((function(o,n){o.areaCmp.toString()===e.toString()&&n!==t&&(r.$message.error("【".concat(o.area,"】已存在")),r.form.list[t].areaCmp="",r.form.list[t].area="",a=!1)})),a},_getAreaId:function(e){var t=e.split(","),r=[],a=this.positionJson.filter((function(e){return e.label===t[0]}));return r.push(a[0].value),a=a[0].children.filter((function(e){return e.label===t[1]})),r.push(a[0].value),a=a[0].children.filter((function(e){return e.label===t[2]})),r.push(a[0].value),r},_rulesForm:function(e){var t=!1;return!!this._rulesList()&&(this.$refs[e].validate((function(e){e&&(t=!0)})),t)},_rulesList:function(){for(var e in this.form.list){if(!this.form.list[e].area)return this.$message.error("请先选择第".concat(Number(e)+1,"个地区")),!1;for(var t in this.form.list[e].list){if(!this.form.list[e].list[t].categoryId)return this.$message.error("请先选择【".concat(this.form.list[e].area,"】下面的分类")),!1;if(!this.form.list[e].list[t].percent)return this.$message.error("请先选择【".concat(this.form.list[e].area,"】下面【").concat(this.form.list[e].list[t].categoryName,"】的提成")),!1}}return!0},apiCategoryQuery:function(){var e=this;this.$http.post("/woho/product/category/findByTree").then((function(t){t.data.success?t.data.data.map((function(t){e.categoryList=[].concat(Object(s["a"])(e.categoryList),Object(s["a"])(t.trees))})):e.$message.error(t.data.msg)}))},apiCategoryFindById:function(e){return this.$http.post("/woho/product/category/findById/".concat(e)).then((function(e){return e.data.categoryName}))},apiAddAreauser:function(){var e=this,t=Object(n["a"])({},this.form);this.$http.post("/woho/areauser/insert",t).then((function(t){t.data.success?(e.$message.success("添加成功"),e.$router.go(-1)):e.$message.error(t.data.msg)}))},apiAreauserFindByUserId:function(){var e=this;this.$http.get("/woho/areauser/findByUserId/".concat(this.$route.query.userId)).then((function(t){t.data.success?(t.data.data.list.map((function(t){t.areaCmp=e._getAreaId(t.area)})),e.form=t.data.data,console.log("this.$refs(password)",e.$refs.password),e.$refs.password.focus()):e.$message.error(t.data.msg)}))},apiAreauserUpdate:function(){var e=this,t=JSON.parse(JSON.stringify(this.form));t.user.password.length>32&&(t.user.password=""),this.$http.put("/woho/areauser/update",t).then((function(t){console.log(t),t.data.success?(e.$message.success("保存成功"),e.$router.go(-1)):e.$message.error(t.data.msg)}))}},created:function(){this.apiCategoryQuery(),this.$route.query.userId&&this.apiAreauserFindByUserId()}},u=c,f=(r("b210"),r("5d22")),m=Object(f["a"])(u,a,o,!1,null,"5c3f3263",null);t["default"]=m.exports},"994c":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},b210:function(e,t,r){"use strict";r("c74c")},b4e6:function(e,t,r){"use strict";var a=r("bbcf"),o=r("5501"),n=r("285a"),s=r("5152"),i=r("529d"),l=r("5c1e"),c=r("7389"),u=r("780c"),f=r("e9a9"),m=u("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!d},{splice:function(e,t){var r,a,u,f,m,d,y=i(this),v=s(y.length),_=o(e,v),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=v-_):(r=w-2,a=h(p(n(t),0),v-_)),v+r-a>g)throw TypeError(b);for(u=l(y,a),f=0;f<a;f++)m=_+f,m in y&&c(u,f,y[m]);if(u.length=a,r<a){for(f=_;f<v-a;f++)m=f+a,d=f+r,m in y?y[d]=y[m]:delete y[d];for(f=v;f>v-a+r;f--)delete y[f-1]}else if(r>a)for(f=v-a;f>_;f--)m=f+a-1,d=f+r-1,m in y?y[d]=y[m]:delete y[d];for(f=0;f<r;f++)y[f+_]=arguments[f+2];return y.length=v-a+r,u}})},c74c:function(e,t,r){},eb14:function(e,t,r){var a=r("41ba");a("iterator")},ed16:function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,"a",(function(){return a}))}}]);
//# sourceMappingURL=chunk-0b997fcd.71090185.js.map