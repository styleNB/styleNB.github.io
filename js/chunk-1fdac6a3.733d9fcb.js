(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fdac6a3"],{b4e6:function(e,t,o){"use strict";var i=o("bbcf"),n=o("5501"),a=o("285a"),r=o("5152"),s=o("529d"),l=o("5c1e"),c=o("7389"),u=o("780c"),p=o("e9a9"),d=u("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var o,i,u,p,d,f,g=s(this),y=r(g.length),w=n(e,y),k=arguments.length;if(0===k?o=i=0:1===k?(o=0,i=y-w):(o=k-2,i=h(m(a(t),0),y-w)),y+o-i>b)throw TypeError(v);for(u=l(g,i),p=0;p<i;p++)d=w+p,d in g&&c(u,p,g[d]);if(u.length=i,o<i){for(p=w;p<y-i;p++)d=p+i,f=p+o,d in g?g[f]=g[d]:delete g[f];for(p=y;p>y-i+o;p--)delete g[p-1]}else if(o>i)for(p=y-i;p>w;p--)d=p+i-1,f=p+o-1,d in g?g[f]=g[d]:delete g[f];for(p=0;p<o;p++)g[p+w]=arguments[p+2];return g.length=y-i+o,u}})},fc8d:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("LayoutBox",{attrs:{one:"视频管理"}},[o("el-form",{attrs:{model:e.form,size:"small",inline:""}},[o("el-form-item",[o("router-link",{attrs:{to:"/videoSet"}},[o("el-button",{attrs:{icon:"el-icon-setting",type:"success"}},[e._v("热门配置")])],1)],1),o("el-form-item",{attrs:{label:"视频名称"}},[o("el-input",{model:{value:e.form.videoName,callback:function(t){e.$set(e.form,"videoName",t)},expression:"form.videoName"}})],1),o("el-form-item",{attrs:{label:"作者"}},[o("el-input",{model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),o("el-form-item",{attrs:{label:"审核状态"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.approvalStatus,callback:function(t){e.$set(e.form,"approvalStatus",t)},expression:"form.approvalStatus"}},[o("el-option",{attrs:{label:"全部",value:""}}),o("el-option",{attrs:{label:"未审核",value:"0"}}),o("el-option",{attrs:{label:"已通过",value:"1"}}),o("el-option",{attrs:{label:"已拒绝",value:"2"}})],1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.apiGetVideoList}},[e._v("查询")])],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.videoList,"default-sort":{prop:"createTime",order:"descending"},height:"600px",size:"mini"},on:{"sort-change":e.onSort}},[o("el-table-column",{attrs:{prop:"createTime",label:"上传时间",align:"center",sortable:"custom",width:"140"}}),o("el-table-column",{attrs:{prop:"videoName",label:"视频名称",align:"center","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"视频",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("video",{attrs:{src:e.row.videoUrl,preload:"auto",controls:"",width:"150",height:"130"}})]}}])}),o("el-table-column",{attrs:{prop:"userName",label:"作者",align:"center","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"置顶状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isTop?o("span",[e._v("置顶")]):e._e()]}}])}),o("el-table-column",{attrs:{label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.approvalStatus?e._e():o("span",[e._v("未审核")]),1===t.row.approvalStatus?o("span",[e._v("已通过")]):e._e(),2===t.row.approvalStatus?o("span",[e._v("拒绝审核")]):e._e()]}}])}),o("el-table-column",{attrs:{prop:"likeNum",label:"获得点赞数",align:"center",sortable:"custom",width:"105"}}),o("el-table-column",{attrs:{prop:"realLikeNum",label:"真实获得点赞数",align:"center",sortable:"custom",width:"130"}}),o("el-table-column",{attrs:{label:"浏览量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",[e._v(e._s(t.row.traffic))]),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return e.onSet(t)}}},[e._v("设置")])]}}])}),o("el-table-column",{attrs:{label:"增加点赞数量",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"btn_edit_group"},[o("el-button",{staticStyle:{width:"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.onEdit(t,100)}}},[e._v("+100")]),o("el-button",{staticStyle:{width:"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.onEdit(t,1e3)}}},[e._v("+1000")]),o("el-button",{staticStyle:{width:"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.onEdit(t,1e4)}}},[e._v("+1w")])],1),o("div",{staticStyle:{"margin-top":"5px"}},[o("el-button",{staticStyle:{width:"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.onEdit(t,1e5)}}},[e._v("+10W")]),o("el-button",{staticStyle:{width:"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.onEdit(t,1e6)}}},[e._v("+100w")]),o("el-button",{staticStyle:{width:"65px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.onEdit(t,1e7)}}},[e._v("+1000W")])],1)]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.onDetele(t)}}},[e._v("删除")]),1===t.row.enableStatus?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.onDisable(t)}}},[e._v("禁用")]):o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.onEnable(t)}}},[e._v("启用")]),t.row.isTop?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.onCancelTop(t)}}},[e._v("取消置顶")]):o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.onTop(t)}}},[e._v("置顶")])],1),t.row.approvalStatus?e._e():o("div",[o("el-button",{staticStyle:{color:"#22ce5e"},attrs:{type:"text"},on:{click:function(o){return e.onApprovalStatus(t,1)}}},[e._v("通过")]),o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){return e.onApprovalStatus(t,2)}}},[e._v("拒绝")])],1)]}}])})],1),o("el-pagination",{staticClass:"mt-1 text-right",attrs:{background:"","current-page":e.queryInit.pageNo,"page-sizes":[10,20,30,40],"page-size":e.queryInit.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),o("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",[e._v("这是一段信息")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),o("traffic-cmp",{attrs:{dialogVisible:e.trafficVisible,selectVideoId:e.selectVideoId},on:{close:e.trafficClose}})],1)},n=[],a=(o("51d7"),o("b4e6"),o("6a61"),o("2e91")),r=o("d211"),s=o("1b00"),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"浏览量",visible:e.dialogVisible,"close-on-click-modal":!1,"before-close":e.onClose,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-input",{model:{value:e.number,callback:function(t){e.number=e._n(t)},expression:"number"}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.onClose}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("确 定")])],1)],1)},c=[],u={name:"trafficCmp",props:{dialogVisible:{type:Boolean,default:!1},selectVideoId:{type:String,default:""}},data:function(){return{number:""}},methods:{onClose:function(){this.$emit("close")},onSave:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.number>-1)){t.next=7;break}return t.next=3,e.$http.get("".concat(e.$api.updateTraffic,"/").concat(e.selectVideoId,"/").concat(e.number));case 3:o=t.sent,o.data.success?(e.$message.success("保存成功"),e.onClose()):e.$message.error(o.data.msg),t.next=8;break;case 7:e.$message.error("请输出正确的浏览量");case 8:case"end":return t.stop()}}),t)})))()}}},p=u,d=o("5d22"),f=Object(d["a"])(p,l,c,!1,null,"606f6880",null),m=f.exports,h={name:"video_list",components:{LayoutBox:s["a"],TrafficCmp:m},data:function(){return{total:0,queryInit:{pageNo:1,pageSize:10},videoList:[],form:{orderByType:0},dialogVisible:!1,trafficVisible:!1,selectVideoId:""}},methods:{handleSizeChange:function(e){this.queryInit.pageSize=e,this.apiGetVideoList()},handleCurrentChange:function(e){this.queryInit.pageNo=e,this.apiGetVideoList()},onDetele:function(e){this.apiDeleteVideo(e)},onDisable:function(e){this.apiEnableOrdisable(e,0)},onEnable:function(e){this.apiEnableOrdisable(e,1)},onApprovalStatus:function(e,t){var o=this;switch(t){case 1:this._confirm("审核通过").then((function(){return o.apiVideoApprove(e,t)}));break;case 2:this._confirm("审核拒绝").then((function(){return o.apiVideoApprove(e,t)}));break}},onEdit:function(e,t){var o=this;this.$confirm("增加".concat(t,"点赞数量, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){o.apiUpdateLike(e,e.row.likeNum+t)}))},onSort:function(e){e.column;var t=e.prop,o=e.order;switch(o){case"ascending":this.form.orderByType=this._sortKeyAscending(t);break;case"descending":this.form.orderByType=this._sortKeyDescending(t);break;default:break}this.apiGetVideoList()},onTop:function(e){this.apiUpdateTop(e.row.id,1)},onCancelTop:function(e){this.apiUpdateTop(e.row.id,0)},trafficClose:function(){this.trafficVisible=!1,this.apiGetVideoList()},onSet:function(e){this.trafficVisible=!0,this.selectVideoId=e.row.id},_confirm:function(e){return this.$confirm("".concat(e,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then()},_sortKeyAscending:function(e){switch(e){case"likeNum":return 8;case"realLikeNum":return 7;case"createTime":return 1;default:return""}},_sortKeyDescending:function(e){switch(e){case"likeNum":return 10;case"realLikeNum":return 9;case"createTime":return 0;default:return""}},apiGetVideoList:function(){var e=this,t=Object(r["a"])(Object(r["a"])({},this.queryInit),this.form);this.$http.post("/woho/homepage/video/query",t).then((function(t){t.data.success?(e.videoList=t.data.data.list,e.total=t.data.data.total):e.$message.error(t.data.msg)}))},apiDeleteVideo:function(e){var t=this;this.$http.delete("/woho/homepage/video/delete/".concat(e.row.id)).then((function(o){console.log(o),o.data.success?(t.$message.success("删除成功"),t.videoList.splice(e.$index,1)):t.$message.error(o.data.msg)}))},apiEnableOrdisable:function(e,t){var o=this;this.$http.post("/woho/homepage/video/enableOrdisable/".concat(e.row.id,"/").concat(t)).then((function(i){i.data.success?(o.$message.success("操作成功"),e.row.enableStatus=t):o.$message.error(i.data.msg)}))},apiVideoApprove:function(e,t){var o=this,i={id:e.row.id,approveStatus:t};this.$http.post("/woho/homepage/video/approve",i).then((function(i){i.data.success?(e.row.approvalStatus=t,o.$message.success("操作成功")):o.$message.error(i.data.msg)}))},apiUpdateLike:function(e,t){var o=this,i={id:e.row.id,likeNum:t};this.$http.post("/woho/homepage/video/updateLike",i).then((function(i){console.log("修改点赞",i),i.data.success?(o.$message.success("修改成功"),e.row.likeNum=t):o.$message.error(i.data.msg)}))},apiUpdateTop:function(e,t){var o=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,o.$http.get("/woho/homepage/video/updateTop/".concat(e,"/").concat(t));case 2:n=i.sent,n.data.success?(o.apiGetVideoList(),o.$message.success("操作成功")):o.$message.error(n.data.msg);case 4:case"end":return i.stop()}}),i)})))()}},created:function(){this.apiGetVideoList()}},b=h,v=Object(d["a"])(b,i,n,!1,null,"3c2cefde",null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-1fdac6a3.733d9fcb.js.map