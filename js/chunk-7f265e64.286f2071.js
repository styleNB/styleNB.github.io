(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f265e64"],{"0c9c":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"13cf":function(t,e,r){var n=r("9ba3"),o=r("994c"),i="["+o+"]",a=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),s=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(a,"")),2&t&&(r=r.replace(u,"")),r}};t.exports={start:s(1),end:s(2),trim:s(3)}},"24fa":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("LayoutBox",{attrs:{one:"添加商品"}},[r("h4",[t._v("商品信息填写")]),r("el-divider"),r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[r("el-form-item",{attrs:{label:"名称：",prop:"name"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"编码：",prop:"code"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品编码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),r("el-form-item",{attrs:{label:"商品分类：",prop:"categoryId"}},[r("el-cascader",{attrs:{options:t.sortList},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}})],1),r("el-form-item",{attrs:{label:"原价：",prop:"originalPrice"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入原价"},model:{value:t.form.originalPrice,callback:function(e){t.$set(t.form,"originalPrice",e)},expression:"form.originalPrice"}})],1),r("el-form-item",{attrs:{label:"重量：",prop:"weight"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入重量"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}},[r("template",{slot:"append"},[t._v("kg")])],2)],1),r("el-form-item",{attrs:{label:"商品图片：",required:""}},[r("el-upload",{attrs:{action:"http-request","http-request":t.onUpload,"list-type":"picture-card","on-remove":t.onRemove,"file-list":t.imageUrlList,limit:5,multiple:""}},[r("i",{staticClass:"el-icon-plus"})])],1),r("el-form-item",{attrs:{label:"商品描述：",prop:"title"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入商品描述"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-divider"),r("el-form-item",[t.id?r("el-button",{staticClass:"inquire",attrs:{type:"success",round:""},on:{click:function(e){return t.onSave("form")}}},[t._v("保存")]):r("el-button",{staticClass:"inquire",attrs:{type:"success",round:""},on:{click:function(e){return t.onSubmit("form")}}},[t._v("提交")]),r("router-link",{attrs:{to:"/superMarket/goodsList"}},[r("el-button",{staticStyle:{width:"112px"},attrs:{type:"danger",round:""}},[t._v("取消")])],1)],1)],1)],1),r("image-compressor-cmp",{ref:"imageCompressorCmp"})],1)},o=[],i=(r("3f4b"),r("7f64"),r("957b"),r("65ba"),r("6a22"),r("d211")),a=(r("6a61"),r("2e91")),u=r("1b00"),s=r("d901"),c=r("a8dc"),d={name:"GoodsAdd",components:{LayoutBox:u["a"],imageCompressorCmp:s["a"]},mixins:[c["t"]],data:function(){var t=function(t,e,r){var n=/^\d+(\.\d+)?$/;n.exec(e)||r(new Error("只能输入数字"))};return{id:"",itemId:"",headId:"",imageUrlList:[],form:{name:"",categoryId:"",originalPrice:"",weight:"",title:"",type:1,spellGroupTime:"",activityNumber:"",presellProdInfo:{amount:"",refundPrice:"",createTime:"",endTime:"",sendTime:""}},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],categoryId:[{required:!0,message:"请输入品类名称",trigger:"blur"}],originalPrice:[{required:!0,message:"请输入原价",trigger:"blur"},{validator:t,trigger:"blur"}],weight:[{required:!0,message:"请输入重量",trigger:"blur"}],title:[{required:!0,message:"请输入商品描述",trigger:"blur"}]},sortList:[]}},methods:{onSubmit:function(t){var e=this._formRules(t);e.price=this.form.originalPrice,e&&this.apiAddGoods(e)},onSave:function(t){var e=this._formRules(t);e.id=this.itemId,e.headId=this.headId,e&&this.apiUpdateGoods(e)},onUpload:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.file,o="image/jpeg"===n.type||"image/png"===n.type,o){r.next=5;break}return e.$message.error("上传的图标只能是 JPG/PNG 格式!"),r.abrupt("return");case 5:return r.next=7,e.apiUpload(n);case 7:case"end":return r.stop()}}),r)})))()},onRemove:function(t,e){this.imageUrlList=e},_formRules:function(t){var e=!0;if(this.imageUrlList.length<1)return this.$message.error("请选择图片"),e=!1,e;if(this.$refs[t].validate((function(t){e=!!t})),e){e=this.form;var r="";this.imageUrlList.map((function(t){var n="imageUrl"+r;e[n]=t.url,r=Number(r)+1}));var n=e.categoryId.map((function(t){return t.id}));n=n.join(",");var o=e.categoryId[e.categoryId.length-1],a={categoryIds:n,categoryId:o.id,categoryName:o.categoryName};e=Object(i["a"])(Object(i["a"])({},e),a)}return e},_sortRecursive:function(t,e,r,n){var o=this;if(n<t)return!1;var i="level"+t;return this[i]=[],this[i]=r.filter((function(r){return r.level===t&&r.parentId===e})),this[i].map((function(e){return{value:e,label:e.categoryName,children:o._sortRecursive(t+1,e.id,r,n)}}))},apiAddGoods:function(t){var e=this;this.$http.post("/woho/small/product/addProd",t).then((function(t){t.data.success?(e.$message.success("保存成功"),e.$router.push("/superMarket/goodsList")):e.$message.error(t.data.msg)}))},apiUpdateGoods:function(t){var e=this;this.$http.put("/woho/small/product/updateSmallProd",t).then((function(t){t.data.success?(e.$message.success("保存成功"),e.$router.push("/superMarket/goodsList")):e.$message.error(t.data.msg)}))},apiGetSortList:function(){var t=this,e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.queryParentNoPage({}).then((function(r){e.close(),r.data.success&&(t.initSortList=r.data.data,t.sortList=t._sortRecursive(1,"0",r.data.data,3))}))},apiUpload:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$refs.imageCompressorCmp._imageCompressor(t);case 2:n=r.sent,e.$http.post("/common/oss/uploadFile",n).then((function(t){t.data.success?e.imageUrlList.push({url:t.data.data.webUrl}):e.$message.error(t.data.msg)}));case 4:case"end":return r.stop()}}),r)})))()},apiFindIdGoods:function(){var t=this;this.$http.get("/woho/small/product/getSmallProdById/".concat(this.id)).then((function(e){t.form=e.data.data,t.itemId=t.form.id;var r=[],n=[],o=[];r=t.initSortList.filter((function(e){return e.id===t.form.categoryId})),n=t.initSortList.filter((function(t){return t.id===r[0].parentId})),o=t.initSortList.filter((function(t){return t.id===n[0].parentId})),t.form.categoryId=[],t.form.categoryId[0]=o[0],t.form.categoryId[1]=n[0],t.form.categoryId[2]=r[0];for(var i="";i<5;){var a="imageUrl"+i;t.form[a]&&t.imageUrlList.push({url:t.form[a]}),i=Number(i)+1}}))}},created:function(){var t=this;this.apiGetSortList(),this.id=this.$route.query.id,setTimeout((function(){t.id&&t.apiFindIdGoods()}),1e3)}},f=d,h=r("5d22"),p=Object(h["a"])(f,n,o,!1,null,null,null);e["default"]=p.exports},3098:function(t,e,r){"use strict";var n=r("bbcf"),o=r("6921"),i=r("4c16"),a=r("631e"),u=r("2fb1"),s=r("60ce").f,c=r("7e26"),d=i.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var f={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new d(t):void 0===t?d():d(t);return""===t&&(f[e]=!0),e};c(h,d);var p=h.prototype=d.prototype;p.constructor=h;var l=p.toString,m="Symbol(test)"==String(d("test")),g=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=u(this)?this.valueOf():this,e=l.call(t);if(a(f,t))return"";var r=m?e.slice(7,-1):e.replace(g,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:h})}},"4c09":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("ed16");function o(t){if(Array.isArray(t))return Object(n["a"])(t)}r("f869"),r("3098"),r("eb14"),r("3e68"),r("4d20"),r("2181"),r("659e");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var a=r("69a9");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return o(t)||i(t)||Object(a["a"])(t)||u()}},"65ba":function(t,e,r){"use strict";var n=r("6921"),o=r("4c16"),i=r("adc7"),a=r("58e4"),u=r("631e"),s=r("40e6"),c=r("d922"),d=r("6a27"),f=r("e4bd"),h=r("4035"),p=r("889a").f,l=r("37cb").f,m=r("60ce").f,g=r("13cf").trim,y="Number",v=o[y],b=v.prototype,I=s(h(b))==y,w=function(t){var e,r,n,o,i,a,u,s,c=d(t,!1);if("string"==typeof c&&c.length>2)if(c=g(c),e=c.charCodeAt(0),43===e||45===e){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(i=c.slice(2),a=i.length,u=0;u<a;u++)if(s=i.charCodeAt(u),s<48||s>o)return NaN;return parseInt(i,n)}return+c};if(i(y,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var $,S=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof S&&(I?f((function(){b.valueOf.call(r)})):s(r)!=y)?c(new v(w(e)),r,S):w(e)},A=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),P=0;A.length>P;P++)u(v,$=A[P])&&!u(S,$)&&m(S,$,l(v,$));S.prototype=b,b.constructor=S,a(o,y,S)}},"69a9":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("3e68"),r("eb27"),r("1e6a"),r("4d20"),r("8d56"),r("2181");var n=r("ed16");function o(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(t,e):void 0}}},"994c":function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},a8dc:function(t,e,r){"use strict";r.d(e,"e",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"r",(function(){return a})),r.d(e,"n",(function(){return u})),r.d(e,"q",(function(){return s})),r.d(e,"j",(function(){return c})),r.d(e,"o",(function(){return d})),r.d(e,"p",(function(){return f})),r.d(e,"k",(function(){return b})),r.d(e,"c",(function(){return w})),r.d(e,"z",(function(){return $})),r.d(e,"A",(function(){return S})),r.d(e,"m",(function(){return A})),r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return p})),r.d(e,"x",(function(){return l})),r.d(e,"y",(function(){return m})),r.d(e,"w",(function(){return g})),r.d(e,"f",(function(){return y})),r.d(e,"B",(function(){return v})),r.d(e,"g",(function(){return P})),r.d(e,"u",(function(){return x})),r.d(e,"D",(function(){return C})),r.d(e,"t",(function(){return I})),r.d(e,"h",(function(){return N})),r.d(e,"i",(function(){return k})),r.d(e,"s",(function(){return L})),r.d(e,"l",(function(){return R})),r.d(e,"C",(function(){return q})),r.d(e,"v",(function(){return T}));r("51d7"),r("6a22"),r("80cf"),r("dfce");var n=r("4c09"),o={methods:{apiInsertMerActivity:function(){var t=this.form;return t.rpl=this.goodsAndActivity,t.activeType=this.activeType,t.type=1,this.$http.post("/woho/activity/manage/insertMerActivity",t).then((function(t){return t}))},apiUpdateMerActivity:function(){var t=this.form;return t.rpl=[].concat(Object(n["a"])(this.goodsAndActivity),Object(n["a"])(this.oldGoodsAndActivity)),t=JSON.parse(JSON.stringify(t).replace(/originalPrice/g,"price")),t.activeType=this.activeType,t.type=1,this.$http.post("/woho/activity/manage/updateMerActivity",t).then((function(t){return t}))},apiFindById:function(){var t=this;this.$http.post("/woho/activity/manage/findByActivityIdGetProduct/".concat(this.$route.query.id)).then((function(e){t.form=e.data,t.oldGoodsAndActivity=e.data.rpl}))}}},i={methods:{apiProductQueryChoose:function(t){return this.$http.post("/woho/product/head/queryChoose",t).then((function(t){return t}))}}},a={methods:{productBatchVip:function(t){return this.$http.post("/woho/product/head/batchVip",t).then((function(t){return t}))}}},u={methods:{postAdd:function(t){return this.$http.post("/woho/post/add",t).then((function(t){return t}))}}},s={methods:{postEetPostRule:function(t){var e=t.no,r=t.size;t.search;return this.$http.get("/woho/post/getPostRule?no=".concat(e,"&size=").concat(r)).then((function(t){return t}))}}},c={methods:{getPostRule:function(t){return this.$http.get("/woho/post/getPostRule/".concat(t)).then((function(t){return t}))}}},d={methods:{postDelete:function(t){var e=t.ruleIds;return this.$http.get("/woho/post/delete/".concat(e)).then((function(t){return t}))}}},f={methods:{postEdit:function(t){return this.$http.post("/woho/post/edit",t).then((function(t){return t}))}}},h={methods:{adminPostFindById:function(t){return this.$http.post("/woho/post/query",t).then((function(t){return t}))}}},p={methods:{adminPostUpdate:function(t){return this.$http.post("/woho/post/update",t).then((function(t){return t}))}}},l={methods:{superGetCost:function(t){return this.$http.post("/woho/post/getCost",t).then((function(t){return t}))}}},m={methods:{superUpdateShopPostage:function(t){return this.$http.post("/woho/post/updateShopPostage",t).then((function(t){return t}))}}},g={methods:{superAddShopPostage:function(t){return this.$http.post("/woho/post/addShopPostage",t).then((function(t){return t}))}}},y={methods:{deleteAdvertising:function(t){return this.$http.get("/SmallProductCategory/deleteCategory?id=".concat(t)).then((function(t){return t}))}}},v={methods:{updateCategory:function(t){return this.$http.post("/SmallProductCategory/updateCategory",t).then((function(t){return t}))}}},b={methods:{getSmallParentCategory:function(t){return this.$http.post("/SmallProductCategory/getParentCategory",t).then((function(t){return t}))}}},I={methods:{queryParentNoPage:function(t){return this.$http.post("/SmallProductCategory/queryParentNoPage",t).then((function(t){return t}))}}},w={methods:{apiFindByIdAdvertising:function(t){return this.$http.get("/SmallProductCategory/findById/".concat(t.id)).then((function(t){return t}))}}},$={methods:{tradeAddTrade:function(t){return this.$http.post("/woho/trade/manage/addTrade",t).then((function(t){return t}))}}},S={methods:{tradeQueryList:function(t){return this.$http.post("/woho/trade/manage/queryList",t).then((function(t){return t}))}}},A={methods:{orderHeadFindById:function(t){return this.$http.post("/woho/order/head/findById/".concat(t)).then((function(t){return t}))}}},P={methods:{forgetPassword:function(t){return this.$http.post("/admin/forget-password",t).then((function(t){return t}))}}},x={methods:{queryRiders:function(t){return this.$Http24.get("/timely/courier/queryRiders/".concat(t)).then((function(t){return t}))}}},C={methods:{zhiDing:function(t){return this.$Http24.get("/timely/courier/zhiDing?id=".concat(t.selectRiderId,"&orderId=").concat(t.orderId,"&shopId=").concat(t.shopId)).then((function(t){return t}))}}},N={methods:{getCount:function(){return this.$http.get("/woho/sys/user/getCount").then((function(t){return t}))}}},k={methods:{getFeedBack:function(t){return this.$http.post("/woho/feedback/manage/getFeedBack",t).then((function(t){return t}))}}},L={methods:{quaryActivityType:function(t){return this.$http.get("/woho/activity/type/quaryActivityType",t).then((function(t){return t}))}}},R={methods:{insertActivityType:function(t){return this.$http.post("/woho/activity/type/insertActivityType",t).then((function(t){return t}))}}},q={methods:{updateRecom:function(t,e){return this.$http.get("woho/small/product/updateRecom/".concat(t,"/").concat(e)).then((function(t){return t}))}}},T={methods:{shopmanagequery:function(t){return this.$http.post("/woho/shop/manage/query",t).then((function(t){return t}))}}}},dfce:function(t,e,r){"use strict";var n=r("ebfe"),o=r("708d"),i=r("9ba3"),a=r("0c9c"),u=r("97d7");n("search",1,(function(t,e,r){return[function(e){var r=i(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var i=o(t),s=String(this),c=i.lastIndex;a(c,0)||(i.lastIndex=0);var d=u(i,s);return a(i.lastIndex,c)||(i.lastIndex=c),null===d?-1:d.index}]}))},eb14:function(t,e,r){var n=r("41ba");n("iterator")},ed16:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return n}))}}]);
//# sourceMappingURL=chunk-7f265e64.286f2071.js.map