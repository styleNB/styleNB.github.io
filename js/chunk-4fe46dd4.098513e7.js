(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fe46dd4"],{"4f97":function(e,t,i){},6346:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),i("el-breadcrumb-item",[i("a",{attrs:{href:"/"}},[e._v("订单列表")])]),i("el-breadcrumb-item",[e._v("发货")])],1),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"from"},[i("p",[e._v(" 收货地址： "),1===e.receiverDeliverDtlDataEdit?i("i",{staticClass:"el-icon-edit",on:{click:function(t){e.receiverDeliverDtlDataEdit=2}}}):e._e()]),i("div",[2===e.receiverDeliverDtlDataEdit?i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:e.deliverDtlData.receiverName,callback:function(t){e.$set(e.deliverDtlData,"receiverName",t)},expression:"deliverDtlData.receiverName"}}):i("span",{staticClass:"accept_name"},[e._v(e._s(e.deliverDtlData.receiverName))]),2===e.receiverDeliverDtlDataEdit?i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机号"},model:{value:e.deliverDtlData.receiverPhone,callback:function(t){e.$set(e.deliverDtlData,"receiverPhone",t)},expression:"deliverDtlData.receiverPhone"}}):i("span",[e._v(e._s(e.deliverDtlData.receiverPhone))]),i("div",{staticClass:"mb-1"})],1),e._e(),2===e.receiverDeliverDtlDataEdit?i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入地址"},model:{value:e.deliverDtlData.receiverAddress,callback:function(t){e.$set(e.deliverDtlData,"receiverAddress",t)},expression:"deliverDtlData.receiverAddress"}}):i("p",[e._v(e._s(e.deliverDtlData.receiverAddress))]),i("br"),2===e.receiverDeliverDtlDataEdit?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onReceiverDeliverDtlDataEdit}},[e._v("保存")]):e._e(),i("p",{staticClass:"send_title"},[e._v("发货地址："),1===e.deliveryDeliverDtlDataEdit?i("i",{staticClass:"el-icon-edit",on:{click:function(t){e.deliveryDeliverDtlDataEdit=2}}}):e._e()]),i("div",[2===e.deliveryDeliverDtlDataEdit?i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:e.deliverDtlData.deliveryName,callback:function(t){e.$set(e.deliverDtlData,"deliveryName",t)},expression:"deliverDtlData.deliveryName"}}):i("span",{staticClass:"send_name"},[e._v(e._s(e.deliverDtlData.deliveryName))]),2===e.deliveryDeliverDtlDataEdit?i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机号"},model:{value:e.deliverDtlData.deliveryPhone,callback:function(t){e.$set(e.deliverDtlData,"deliveryPhone",t)},expression:"deliverDtlData.deliveryPhone"}}):i("span",[e._v(e._s(e.deliverDtlData.deliveryPhone))]),i("div",{staticClass:"mb-1"})],1),e._e(),2===e.deliveryDeliverDtlDataEdit?i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入地址"},model:{value:e.deliverDtlData.deliveryAddress,callback:function(t){e.$set(e.deliverDtlData,"deliveryAddress",t)},expression:"deliverDtlData.deliveryAddress"}}):i("p",[e._v(e._s(e.deliverDtlData.deliveryAddress))]),i("br"),2===e.deliveryDeliverDtlDataEdit?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onDeliveryDeliverDtlDataEdit}},[e._v("保存")]):e._e(),i("div",{staticClass:"mb-4"}),i("span",[e._v("请选择物流方式：")]),i("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:e.onSelect},model:{value:e.logisticValue,callback:function(t){e.logisticValue=t},expression:"logisticValue"}},[i("el-option",{attrs:{label:"二四半日达",value:0}}),i("el-option",{attrs:{label:"三方快递",value:2}}),i("el-option",{attrs:{label:"商家自己配送",value:3}})],1),e.isExpress?i("div",{staticClass:"express_company"},[i("span",[e._v("物流公司")]),i("el-input",{staticClass:"express_input",attrs:{size:"mini"},model:{value:e.logisticsCompany,callback:function(t){e.logisticsCompany=t},expression:"logisticsCompany"}})],1):e._e(),e.isExpress?i("div",{staticClass:"express_id"},[i("span",[e._v("货运单号")]),i("el-input",{staticClass:"express_input",attrs:{size:"mini"},model:{value:e.logistics,callback:function(t){e.logistics=t},expression:"logistics"}})],1):e._e()],1),i("div",{staticClass:"btn_group"},[i("el-button",{staticStyle:{width:"100px"},attrs:{type:"success",size:"medium",round:""},on:{click:e.onConfirm}},[e._v("确认发货")]),i("router-link",{attrs:{to:"/orderList"}},[i("el-button",{staticStyle:{width:"100px"},attrs:{size:"medium",round:""}},[e._v("取消")])],1)],1)])],1)},a=[],r=i("d211"),l=i("f676"),d={name:"ship",data:function(){return{logisticsCompany:"",logistics:"",deliverDtlData:"",logisticValue:"",isExpress:!1,receiverDeliverDtlDataEdit:0,deliveryDeliverDtlDataEdit:0,receiverArea:"",deliveryArea:""}},components:{areaSelectCmp:l["a"]},methods:{onSelect:function(e){switch(e){case 0:this.receiverDeliverDtlDataEdit=1,this.deliveryDeliverDtlDataEdit=1,this.isExpress=!1,this.logisticsCompany="",this.logistics="";break;case 1:this.receiverDeliverDtlDataEdit=1,this.deliveryDeliverDtlDataEdit=1,this.isExpress=!1,this.logisticsCompany="",this.logistics="";break;case 2:this.receiverDeliverDtlDataEdit=0,this.deliveryDeliverDtlDataEdit=0,this.isExpress=!0;break;case 3:this.isExpress=!1,this.logisticsCompany="",this.logistics="";break}},onReceiverChild:function(e){var t=e[0]+","+e[1];3===e.length&&(t=t+","+e[2],console.log(t))},onDeliveryChild:function(e){var t=e[0]+","+e[1];3===e.length&&(t=t+","+e[2],console.log(t))},onConfirm:function(){if(""===this.logisticValue)return this.$message.error("请选择物流方式");if(2===this.deliveryDeliverDtlDataEdit||2===this.receiverDeliverDtlDataEdit)return this.$message.error("请先保存信息");switch(this.logisticValue){case 0:this.apiLogistics(0);break;case 1:this.apiLogistics(1);break;case 2:this._validationLogistics()&&this.apiConfirm(2);break;case 3:this.apiConfirm(3);break}},onReceiverDeliverDtlDataEdit:function(){this.apiUpdateOrder("receiverDeliverDtlDataEdit")},onDeliveryDeliverDtlDataEdit:function(){this.apiUpdateOrder("deliveryDeliverDtlDataEdit")},_validationLogistics:function(){return this.logistics?!!this.logisticsCompany||(this.$message.error("请输入物流公司"),!1):(this.$message.error("请输入货运单号"),!1)},apiUpdateOrder:function(e){var t=this,i=Object(r["a"])({id:this.deliverDtlData.orderId,sellerName:this.deliverDtlData.deliveryName,sellerPhone:this.deliverDtlData.deliveryPhone,sellerAddress:this.deliverDtlData.deliveryAddress},this.deliverDtlData);console.log("this.deliverDtlData",this.deliverDtlData),this.$http.post("/woho/order/head/updateOrder",i).then((function(i){console.log("订单编辑res",i),i.data.success?(t.$message.success("保存成功"),t[e]=1):t.$message.error(i.data.msg)}))},apiLogistics:function(e){var t=this,i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),s={receiverPhone:this.deliverDtlData.receiverPhone,receiver:this.deliverDtlData.receiverName,receiverAddress:this.deliverDtlData.receiverAddress,senderPhone:this.deliverDtlData.deliveryPhone,sender:this.deliverDtlData.deliveryName,senderAddress:this.deliverDtlData.deliveryAddress,remarks:"备注备注",goodsWeight:3,postType:e,otherType:0,orderId:this.$route.query.id};this.$http.post("/woho/order/head/write24",s).then((function(e){console.log("二四物流",e),e.data.success?(t.$message.success("发货成功"),i.close(),t.$router.push({path:"/orderList/orderContent",query:{id:t.$route.query.id}})):(i.close(),e.data.msg?t.$message.error(e.data.msg):t.$message.error(e.data.message))}),(function(e){i.close()}))},apiConfirm:function(e){var t=this,i={logistics:this.logistics,logisticsCompany:this.logisticsCompany,orderId:this.$route.query.id,postType:e};this.$http.post("/woho/order/head/delivery",i).then((function(e){e.data.success?(t.$message.success("发货成功"),t.$router.push({path:"/orderList/orderContent",query:{id:t.$route.query.id}})):t.$message.error(e.data.msg)}))},apigetDeliverDtl:function(){var e=this;this.$http.get("/woho/order/head/getDeliverDtl/".concat(this.$route.query.id)).then((function(t){t.data.success?e.deliverDtlData=t.data.data:e.$message.error(t.data.msg)}))}},created:function(){this.apigetDeliverDtl()}},o=d,c=(i("b6f6"),i("5d22")),n=Object(c["a"])(o,s,a,!1,null,"4656bf14",null);t["default"]=n.exports},b6f6:function(e,t,i){"use strict";i("4f97")}}]);
//# sourceMappingURL=chunk-4fe46dd4.098513e7.js.map