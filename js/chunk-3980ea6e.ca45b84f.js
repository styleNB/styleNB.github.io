(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3980ea6e"],{"254b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[a("a",{attrs:{href:"/commodity/set_cai_dan"}},[e._v("设置菜单")])])],1),a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"inquire",attrs:{type:"success",size:"small",icon:"el-icon-plus",round:""},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增菜单")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,height:"520"}},[a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"area",label:"地区",align:"center"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.enableStatus?a("span",[e._v("禁用")]):0===t.row.enableStatus?a("span",[e._v("启用")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.enableStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.onEnableStatus(t)}}},[e._v("启用")]):0===t.row.enableStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.onEnableStatus(t)}}},[e._v("禁用")]):e._e(),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.onUpdate(t)}}},[e._v("编辑")]),a("el-popconfirm",{attrs:{"confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-info","icon-color":"red",title:"点击将永久删除确定吗？"},on:{confirm:function(a){return e.onDelete(t)}}},[a("el-button",{staticClass:"ml-1",attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.selectId?"编辑菜单":"新增菜单","close-on-click-modal":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"菜单名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"地区",required:""}},[a("areaSelectCmp2",{attrs:{areaParent:e.form.area},on:{childFn2:e.onChildFn2}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e.selectId?a("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保 存")]):a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)},r=[],i=(a("51d7"),a("d211")),s=(a("6a61"),a("2e91")),o=a("809e"),l={components:{areaSelectCmp2:o["a"]},data:function(){return{total:0,pageNo:1,list:[],form:{name:"",area:""},dialogFormVisible:!1,selectId:""}},created:function(){this.apiActivityList()},methods:{handleCurrentChange:function(e){this.pageNo=e,this.apiActivityList()},onSubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(i["a"])({},e.form),t.next=3,e.$http.post(e.$api.HomePageClassificationInsert,a);case 3:n=t.sent,n.data.success?(e.$message.success("添加成功"),e.dialogFormVisible=!1,e.form={},e.apiActivityList()):e.$message.error(n.data.msg);case 5:case"end":return t.stop()}}),t)})))()},onEnableStatus:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.row.enableStatus,r=e.row.id,1!==n){a.next=7;break}return a.next=5,t.apiEnableStatus(r,0);case 5:a.next=10;break;case 7:if(0!==n){a.next=10;break}return a.next=10,t.apiEnableStatus(r,1);case 10:case"end":return a.stop()}}),a)})))()},onDelete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("".concat(t.$api.deleteHomePageClassification,"/").concat(e.row.id));case 2:n=a.sent,n.data.success?(t.$message.success("删除成功"),t.apiActivityList()):t.$message.error(n.data.msg);case 4:case"end":return a.stop()}}),a)})))()},onUpdate:function(e){this.selectId=e.row.id,this.form=e.row,this.dialogFormVisible=!0},onSave:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(i["a"])({},e.form),t.next=3,e.$http.post(e.$api.HomePageClassificationUpdate,a);case 3:n=t.sent,n.data.success?(e.form={},e.apiActivityList(),e.$message.success("保存成功"),e.dialogFormVisible=!1):e.$message.error(n.data.msg);case 5:case"end":return t.stop()}}),t)})))()},onChildFn2:function(e){this.form.area=e},apiActivityList:function(){var e=this,t={pageNo:this.pageNo,pageSize:10};this.$http.post(this.$api.HomePageClassificationQuery,t).then((function(t){console.log(t.data.data.list),e.list=t.data.data.list,e.total=t.data.data.total}))},apiEnableStatus:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={id:e,enableStatus:t},n.next=3,a.$http.post(a.$api.HomePageClassificationUpdate,r);case 3:i=n.sent,i.data.success?(a.$message.success("操作成功"),a.apiActivityList()):a.$message.error(i.data.msg);case 5:case"end":return n.stop()}}),n)})))()}}},c=l,u=(a("6eee"),a("5d22")),f=Object(u["a"])(c,n,r,!1,null,"769f8dbc",null);t["default"]=f.exports},"586b":function(e,t,a){},"6eee":function(e,t,a){"use strict";a("586b")},"809e":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-cascader",{attrs:{options:e.positionJson,size:e.size},on:{change:function(t){return e.handleChange(t)}},model:{value:e.areaGroup,callback:function(t){e.areaGroup=t},expression:"areaGroup"}})],1)},r=[],i=(a("3f4b"),a("6a22"),a("5f89"),a("dc37")),s={name:"areaSelectCmp2",props:{areaParent:{type:[String,Array],default:""},size:{type:String,default:""}},data:function(){return{area:[],positionJson:i}},methods:{handleChange:function(e){var t=this.positionJson.filter((function(t){return t.value===e[0]}));this.area=t[0].label,t=t[0].children.filter((function(t){return t.value===e[1]})),this.area=this.area+","+t[0].label,t=t[0].children.filter((function(t){return t.value===e[2]})),this.area=this.area+","+t[0].label,4===e.length&&(t=t[0].children.filter((function(t){return t.value===e[3]})),this.area=this.area+","+t[0].label),this.$emit("childFn2",this.area)}},computed:{areaGroup:{get:function(){var e=this.areaParent.split(","),t=[],a=this.positionJson.filter((function(t){return t.label===e[0]}));try{t.push(a[0].value),a=a[0].children.filter((function(t){return t.label===e[1]})),t.push(a[0].value),a=a[0].children.filter((function(t){return t.label===e[2]})),t.push(a[0].value),4===e.length&&(a=a[0].children.filter((function(t){return t.label===e[3]})),t.push(a[0].value))}catch(n){}return t},set:function(){}}}},o=s,l=a("5d22"),c=Object(l["a"])(o,n,r,!1,null,"18ba29b2",null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-3980ea6e.ca45b84f.js.map