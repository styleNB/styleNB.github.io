(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19bf4821"],{"1d6a":function(e,t,r){"use strict";r("e5c7")},b583:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box-card"},[r("LayoutBox",{attrs:{one:"添加广告"}},[r("div",{staticClass:"box_border"},[r("div",{staticClass:"group"},[r("h4",[e._v("添加广告")]),r("el-divider"),r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"名称",prop:"imageName"}},[r("el-input",{model:{value:e.form.imageName,callback:function(t){e.$set(e.form,"imageName",t)},expression:"form.imageName"}})],1),r("el-form-item",{attrs:{label:"图片",prop:"imageUrl",required:""}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http-request","http-request":e.uploadSectionFile,"show-file-list":!1}},[e.form.imageUrl?r("el-image",{staticClass:"avatar",attrs:{src:e.form.imageUrl,fit:"contain"}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1),r("p",{staticStyle:{color:"#999999","font-size":"10px"}},[e._v("只能上传jpg/png文件，且不超过10MB，最多可上传5张")])],1),r("el-form-item",{attrs:{label:"地址",prop:"advertisingUrl"}},[r("el-input",{model:{value:e.form.advertisingUrl,callback:function(t){e.$set(e.form,"advertisingUrl",t)},expression:"form.advertisingUrl"}})],1),r("el-form-item",{attrs:{label:"排序",prop:"sn"}},[r("el-input",{model:{value:e.form.sn,callback:function(t){e.$set(e.form,"sn",e._n(t))},expression:"form.sn"}})],1),r("el-form-item",{attrs:{size:"medium"}},[r("el-button",{staticClass:"inquire",staticStyle:{width:"100px"},attrs:{type:"success",round:""},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存")]),r("el-button",{staticStyle:{width:"100px"},attrs:{round:""},on:{click:function(t){return e.$router.back(-1)}}},[e._v("取消")])],1)],1)],1)])]),r("image-compressor-cmp",{ref:"imageCompressorCmp"})],1)},s=[],i=(r("6a61"),r("2e91")),o=r("1b00"),n=r("d901"),u={name:"AdAdd",components:{LayoutBox:o["a"],imageCompressorCmp:n["a"]},data:function(){return{adId:"",value:"",form:{imageName:"",imageUrl:"",advertisingUrl:"",sn:""},rules:{imageName:[{required:!0,message:"请输入图片名称",trigger:"blur"}],advertisingUrl:[{required:!0,message:"请输入链接地址",trigger:"change"}],sn:[{required:!0,message:"请输入序号",trigger:"blur"},{type:"number",message:"序号必须为数字"}]}}},methods:{uploadSectionFile:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a="image/jpeg"===e.file.type||"image/png"===e.file.type,s=e.file.size/1024/1024<10,a){r.next=5;break}return t.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r.abrupt("return");case 5:if(s){r.next=8;break}return t.$message.error("上传头像图片大小不能超过 10MB!"),r.abrupt("return");case 8:return r.next=10,t.$refs.imageCompressorCmp._imageCompressor(e.file);case 10:i=r.sent,t._upload(i);case 12:case"end":return r.stop()}}),r)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){return e?t.form.imageUrl?void(t.adId?t._updateAd().then((function(e){e&&(t.$message.success("保存成功"),t.$router.push("/superMarket/adList"))})):(console.log(11111111111),t._addAdItem())):(t.$message.error("请上传图片"),!1):(console.log("error submit!!"),!1)}))},_addAdItem:function(){var e=this,t=this.form;this.$http.post("/woho/shop/advertising/insert",t).then((function(t){t.data.success?(e.$message.success("添加成功"),e.$router.push("/superMarket/adList")):e.$message.error(t.data.msg)}))},_upload:function(e){var t=this;this.$http.post(this.$api.uploadFile,e).then((function(e){console.log(e.data.data.webUrl),t.form.imageUrl=e.data.data.webUrl}))},_findAdData:function(){var e=this;this.$http.post("/woho/shop/advertising/findById/"+this.adId).then((function(t){console.log(t),e.form=t.data}))},_updateAd:function(){return this.$http.put("/woho/shop/advertising/update",this.form).then((function(e){return!0}))}},created:function(){this.adId=this.$route.query.id},mounted:function(){this.adId&&this._findAdData()}},l=u,m=(r("1d6a"),r("5d22")),c=Object(m["a"])(l,a,s,!1,null,"4812f7ac",null);t["default"]=c.exports},e5c7:function(e,t,r){}}]);
//# sourceMappingURL=chunk-19bf4821.aa4394af.js.map