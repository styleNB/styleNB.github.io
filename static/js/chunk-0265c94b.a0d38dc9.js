(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0265c94b"],{"05d8":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return o}));var n=a("b775");function l(e){return Object(n["a"])({url:"/system/device-conf/list",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/system/device-conf/add",method:"post",data:e})}},"0617":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增设备安装")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-share",size:"mini"}},[e._v("执行安装")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini"}},[e._v("删除记录")])],1)],1),a("el-dialog",{attrs:{visible:e.addDialog,"close-on-click-modal":!1,title:"新增设备配置",width:"500px"},on:{"update:visible":function(t){e.addDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{prop:"deviceType",label:"设备类型"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.deviceType,callback:function(t){e.$set(e.form,"deviceType",t)},expression:"form.deviceType"}},[e._v("读卡器设备")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.deviceType,callback:function(t){e.$set(e.form,"deviceType",t)},expression:"form.deviceType"}},[e._v("人脸设备")]),a("el-radio",{attrs:{label:"3"},model:{value:e.form.deviceType,callback:function(t){e.$set(e.form,"deviceType",t)},expression:"form.deviceType"}},[e._v("指纹设备")])],1),a("el-form-item",{attrs:{label:"模板",prop:"confTemplateId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.confTemplateId,callback:function(t){e.$set(e.form,"confTemplateId",t)},expression:"form.confTemplateId"}},e._l(e.deviceConfTemplateOptions,(function(e){return a("el-option",{key:e.deviceConfTemplateId,attrs:{label:e.name,value:e.deviceConfTemplateId}})})),1)],1),a("el-form-item",{attrs:{label:"配置名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入配置名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._l(e._deviceConfTemplateOptions,(function(t){return a("el-form-item",{key:t,attrs:{label:t}},[a("el-input",{attrs:{placeholder:"请输入配置详细信息"},model:{value:e.form.deviceConfDetail,callback:function(t){e.$set(e.form,"deviceConfDetail",t)},expression:"form.deviceConfDetail"}})],1)}))],2),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.addDialog=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmRole}},[e._v("确定")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceList,"max-height":"500"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"name",label:"设备名称"}}),a("el-table-column",{attrs:{prop:"name",label:"设备ip"}}),a("el-table-column",{attrs:{prop:"name",label:"设备mac"}}),a("el-table-column",{attrs:{prop:"name",label:"备注"}}),a("el-table-column",{attrs:{prop:"name",label:"安装状态"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v(" 移除 ")])]}}])})],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}}),a("el-col",{attrs:{span:1.5,offset:18}},[a("el-button",{attrs:{type:"info",plain:"",icon:"el-icon-caret-bottom",size:"mini"},on:{click:function(t){e.history=!e.history}}},[e._v("历史记录")])],1)],1),e.history?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceList,"max-height":"500"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"name",label:"设备名称"}}),a("el-table-column",{attrs:{prop:"name",label:"设备ip"}}),a("el-table-column",{attrs:{prop:"name",label:"设备mac"}}),a("el-table-column",{attrs:{prop:"name",label:"备注"}}),a("el-table-column",{attrs:{prop:"name",label:"安装状态"}})],1):e._e()],1)},l=[],o=a("99a5"),i=(a("6a61"),a("3f7e"),a("05d8")),r=a("8133"),c={data:function(){return{deviceList:[],history:!1,addDialog:!1,deviceConfTemplateOptions:[],form:{name:"",confTemplateId:"",deviceConfDetail:""},rules:{name:[{required:!0,message:"请输入配置名",trigger:"blur"}],confTemplateId:[{required:!0,message:"请选择模板",trigger:"change"}]}}},computed:{_deviceConfTemplateOptions:function(){var e=this,t=this.deviceConfTemplateOptions.filter((function(t){return t.deviceConfTemplateId===e.form.confTemplateId}));if(t.length)return JSON.parse(t[0].templateDetail)}},created:function(){this.listDeviceConf()},methods:{listDeviceConf:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])();case 2:a=t.sent,e.deviceList=a.rows;case 4:case"end":return t.stop()}}),t)})))()},handleAdd:function(){this.listDeviceConfTemplate(),this.addDialog=!0},listDeviceConfTemplate:function(){var e=this;Object(r["b"])().then((function(t){e.deviceConfTemplateOptions=t.rows}))},deleteRow:function(e,t){console.log(e,t)},confirmRole:function(){var e=this;this.$refs.form.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}return t.next=3,Object(i["a"])(e.form);case 3:e.$message.success("创建成功"),e.addDialog=!1,e.listDeviceConf(),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},s=c,u=(a("a73a"),a("4ac2")),m=Object(u["a"])(s,n,l,!1,null,"5147ca63",null);t["default"]=m.exports},"400f":function(e,t,a){},8133:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return o}));var n=a("b775");function l(e){return Object(n["a"])({url:"/system/device-template/list",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/system/device-template/add",method:"post",data:e})}},a73a:function(e,t,a){"use strict";a("400f")}}]);