(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba4ff554"],{"05d8":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n("b775");function r(e){return Object(a["a"])({url:"/system/device-conf/list",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/system/device-conf/add",method:"post",data:e})}},"71a2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),n("el-dialog",{attrs:{visible:e.addDialog,"close-on-click-modal":!1,title:"新增设备配置",width:"500px"},on:{"update:visible":function(t){e.addDialog=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px",size:"small"}},[n("el-form-item",{attrs:{label:"配置名",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入配置名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"模板"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.confTemplateId,callback:function(t){e.$set(e.form,"confTemplateId",t)},expression:"form.confTemplateId"}},e._l(e.deviceConfTemplateOptions,(function(e){return n("el-option",{key:e.deviceConfTemplateId,attrs:{label:e.name,value:e.deviceConfTemplateId}})})),1)],1),e._l(e.deviceConfTemplateOptions[e.form.confTemplateId],(function(t){return n("el-form-item",{key:t,attrs:{label:t}},[n("el-input",{attrs:{placeholder:"请输入配置详细信息"},model:{value:e.form.deviceConfDetail,callback:function(t){e.$set(e.form,"deviceConfDetail",t)},expression:"form.deviceConfDetail"}})],1)}))],2),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.addDialog=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmRole}},[e._v("确定")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceList,"max-height":"500"}},[n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{prop:"deviceConfDetail",label:"配置详细信息"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v(" 移除 ")])]}}])})],1),n("el-pagination",{attrs:{background:"","current-page":e.queryInit.pageNo,"page-sizes":[10,20,30,40],"page-size":e.queryInit.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.queryInit.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],i=n("4833"),o=(n("6a61"),n("05d8")),l=n("8133"),c={data:function(){return{deviceList:[],addDialog:!1,deviceConfTemplateOptions:[],form:{name:"",confTemplateId:"",deviceConfDetail:""},rules:{name:[{required:!0,message:"请输入配置名",trigger:"blur"}],confTemplateId:[{required:!0,message:"请选择模板",trigger:"change"}]},queryInit:{pageNo:1,pageSize:10,total:0}}},created:function(){this.listDeviceConf()},methods:{handleSizeChange:function(e){this.queryInit.pageSize=e},handleCurrentChange:function(e){this.queryInit.pageNo=e},listDeviceConf:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["b"])();case 2:n=t.sent,e.deviceList=n.rows;case 4:case"end":return t.stop()}}),t)})))()},handleAdd:function(){this.listDeviceConfTemplate(),this.addDialog=!0},listDeviceConfTemplate:function(){var e=this;Object(l["b"])().then((function(t){e.deviceConfTemplateOptions=t.rows}))},deleteRow:function(e,t){console.log(e,t)},confirmRole:function(){var e=this;this.$refs.form.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=8;break}return t.next=3,Object(o["a"])(e.form);case 3:e.$message.success("创建成功"),e.addDialog=!1,e.listDeviceConf(),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},s=c,u=(n("7744"),n("4ac2")),d=Object(u["a"])(s,a,r,!1,null,"17492792",null);t["default"]=d.exports},7744:function(e,t,n){"use strict";n("b6bf")},8133:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n("b775");function r(e){return Object(a["a"])({url:"/system/device-template/list",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/system/device-template/add",method:"post",data:e})}},b6bf:function(e,t,n){}}]);