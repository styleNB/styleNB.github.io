(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2938df83"],{"05d8":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return l}));var a=n("b775");function r(e){return Object(a["a"])({url:"/system/device-conf/list",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/system/device-conf/add",method:"post",data:e})}},"1dfe":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n("b775");function r(e){return Object(a["a"])({url:"/system/dept/list",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/system/dept/list/exclude/"+e,method:"get"})}function o(e){return Object(a["a"])({url:"/system/dept/"+e,method:"get"})}function i(){return Object(a["a"])({url:"/system/dept/treeselect",method:"get"})}function s(e){return Object(a["a"])({url:"/system/dept/roleDeptTreeselect/"+e,method:"get"})}function c(e){return Object(a["a"])({url:"/system/dept/add",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/system/dept",method:"put",data:e})}function u(e){return Object(a["a"])({url:"/system/dept/"+e,method:"delete"})}},3431:function(e,t,n){"use strict";n("d413")},d413:function(e,t,n){},eeaa:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini"},on:{click:e.handleDelete}},[e._v("删除")])],1),n("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),n("el-dialog",{attrs:{visible:e.addDialog,"close-on-click-modal":!1,title:"新增凭证策略",width:"500px"},on:{"update:visible":function(t){e.addDialog=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px",size:"small"}},[n("el-form-item",{attrs:{label:"策略名",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入配置名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"开始时间",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入开始时间"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"结束时间",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入结束时间"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"结束时间",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入结束时间"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"受约束凭证条件"}},[n("el-checkbox",{on:{change:function(t){return e.handleCheckedTreeExpand(t,"dept")}},model:{value:e.deptExpand,callback:function(t){e.deptExpand=t},expression:"deptExpand"}},[e._v("展开/折叠")]),n("el-checkbox",{on:{change:function(t){return e.handleCheckedTreeNodeAll(t,"dept")}},model:{value:e.deptNodeAll,callback:function(t){e.deptNodeAll=t},expression:"deptNodeAll"}},[e._v("全选/全不选")]),n("el-tree",{ref:"dept",staticClass:"tree-border",attrs:{data:e.deptOptions,"show-checkbox":"","default-expand-all":"","node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}})],1),n("el-form-item",{attrs:{label:"策略触发条件",prop:"name"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入策略触发条件"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"策略触发执行命令",prop:"name"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入策略触发执行命令"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.addDialog=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmRole}},[e._v("确定")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceList,"max-height":"500"}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"策略id"}}),n("el-table-column",{attrs:{prop:"name",label:"策略名"}}),n("el-table-column",{attrs:{prop:"name",label:"开始时间"}}),n("el-table-column",{attrs:{prop:"name",label:"结束时间"}}),n("el-table-column",{attrs:{prop:"name",label:"受约束凭证"}}),n("el-table-column",{attrs:{prop:"name",label:"策略触动条件"}}),n("el-table-column",{attrs:{prop:"name",label:"策略触发执行命令"}}),n("el-table-column",{attrs:{prop:"name",label:"策略下发状态"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v(" 移除 ")])]}}])})],1),n("el-pagination",{attrs:{background:"","current-page":e.queryInit.pageNo,"page-sizes":[10,20,30,40],"page-size":e.queryInit.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.queryInit.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],l=n("99a5"),o=(n("6a61"),n("05d8")),i=n("1dfe"),s={data:function(){return{deviceList:[],addDialog:!1,showSearch:!1,deptExpand:!0,deptNodeAll:!1,deptOptions:[],defaultProps:{children:"children",label:"label"},deviceConfTemplateOptions:[],form:{name:"",deptIds:[]},rules:{name:[{required:!0,message:"请输入配置名",trigger:"blur"}]},queryInit:{pageNo:1,pageSize:10,total:0}}},created:function(){this.getDeptTreeselect(),this.getList()},methods:{handleSizeChange:function(e){this.queryInit.pageSize=e},handleCurrentChange:function(e){this.queryInit.pageNo=e},handleAdd:function(){this.addDialog=!0},deleteRow:function(e,t){console.log(e,t)},confirmRole:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}return e.form.deptIds=e.getDeptAllCheckedKeys(),t.next=4,Object(o["a"])(e.form);case 4:e.$message.success("创建成功"),e.addDialog=!1,e.listDeviceConf(),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleDelete:function(){},getList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["b"])();case 2:n=t.sent,e.deviceList=n.rows;case 4:case"end":return t.stop()}}),t)})))()},handleCheckedTreeExpand:function(e){for(var t=this.deptOptions,n=0;n<t.length;n++)this.$refs.dept.store.nodesMap[t[n].id].expanded=e},handleCheckedTreeNodeAll:function(e){this.$refs.dept.setCheckedNodes(e?this.deptOptions:[])},getDeptTreeselect:function(){var e=this;Object(i["g"])().then((function(t){e.deptOptions=t.data}))},getDeptAllCheckedKeys:function(){var e=this.$refs.dept.getCheckedKeys(),t=this.$refs.dept.getHalfCheckedKeys();return e.unshift.apply(e,t),e}}},c=s,d=(n("3431"),n("4ac2")),u=Object(d["a"])(c,a,r,!1,null,"5de117f6",null);t["default"]=u.exports}}]);